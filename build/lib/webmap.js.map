{"version":3,"sources":["webpack://WebMap/webpack/universalModuleDefinition","webpack://WebMap/webpack/bootstrap","webpack://WebMap/external \"events\"","webpack://WebMap/./src/components/entry/TreeUtil.ts","webpack://WebMap/./src/components/entry/TreeHelper.ts","webpack://WebMap/./src/components/entry/properties/BaseProperty.ts","webpack://WebMap/./src/components/entry/properties/CheckProperty.ts","webpack://WebMap/./src/components/entry/properties/EntryProperties.ts","webpack://WebMap/./src/components/entry/Entry.ts","webpack://WebMap/./src/WebLayerEntry.ts","webpack://WebMap/./src/components/keys/KeysCodes.ts","webpack://WebMap/./src/components/keys/Keys.ts","webpack://WebMap/./src/utils/lang.ts","webpack://WebMap/./src/WebMap.ts","webpack://WebMap/./src/index.ts"],"names":["root","factory","exports","module","require","define","amd","window","__WEBPACK_EXTERNAL_MODULE__0__","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","filterIn","entry","filterFunc","relationFunc","_filtered","child","x","Array","isArray","push","relChild","concat","fry","length","TreeHelper_TreeHelper","TreeHelper","this","_children","setParent","parent","_parent","addChildren","children","getParent","getParents","tree","getDescendants","getChildren","BaseProperty_BaseProperty","BaseProperty","options","emitter","external_events_","assign","_value","getProperty","isGroup","isBlocked","_this","undefined","_blocked","parents","find","parentProp","properties","set","_prepareValue","update","_fireChangeEvent","getValue","_callOnSet","getContainer","_container","destroy","parentNode","removeChild","_removeEventsListener","onSet","emit","forEach","prop","CheckProperty","_super","__extends","bubble","unBlock","parent_1","propagation","_turnOn","_turnOff","_propagation","getHierarchyValue","every","turnOff","hierarchy","blockChilds","turnOn","unblockChilds","block","_block","_unBlock","_blockChild","_unBlockChild","childs","__assign","label","EntryProperties_EntryProperties","EntryProperties","propertiesList","_properties","_propertiesList","_setPropertyHandler","add","propOpt","handlers","handler","type","EntryProperties_assign","list","map","ID","Entry_Entry","Entry","id","String","initProperties","WebLayerEntry","item","initItem","WebLayerEntry_extends","newLayer","_layer","item_type","adapter","layer_adapter","toUpperCase","Number","WebLayerEntry_assign","addLayer","layer_enabled","fit","console","log","showLayer","hideLayer","KeyCodes","Keys_Keys","Keys","keyCodeAlias","keys","_windowOnFocus","windowOnFocus","_keysPressed","keysPressed","_keysReleased","keysReleased","addKeyboardEventsListener","pressed","keyName","code","addEventListener","removeKeyboardEventsListener","removeEventListener","e","stopPropagation","keyCode","toString","WebMap_WebMap","WebMap","appOptions","displayProjection","lonlatProjection","settingsIsLoading","_baseLayers","mapAdapter","_starterKits","starterKits","_addEventsListeners","deepmerge","target","src","mergeArray","array","dst","indexOf","settings","getSettings","_a","sent","_setupMap","Promise","resolve","onLoad","removeListener","on","filter","_i","kit","setting","_b","Error","er_1","addBaseLayer","layerName","provider","WebMap_assign","then","layer","isBaseLayer","extent_bottom","extent_left","extent_top","extent_right","_extent","extent","_addTreeLayers","_addLayerProviders","_zoomToInitialExtent","rootLayer","root_item","layers","center","zoom","setCenter","setZoom","_c","__asyncValues","getLayerAdapters","_d","adapters","_e","adapters_1","adapters_1_1","createAdapter","newAdapter","layerAdapters","er_2","ev","_onMapClick","onMapClick","__webpack_exports__"],"mappings":"CAAA,SAAAA,EAAAC,GACA,iBAAAC,SAAA,iBAAAC,OACAA,OAAAD,QAAAD,EAAAG,QAAA,WACA,mBAAAC,eAAAC,IACAD,QAAA,UAAAJ,GACA,iBAAAC,QACAA,QAAA,OAAAD,EAAAG,QAAA,WAEAJ,EAAA,OAAAC,EAAAD,EAAA,QARA,CASCO,OAAA,SAAAC,GACD,mBCTA,IAAAC,KAGA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAT,QAGA,IAAAC,EAAAM,EAAAE,IACAC,EAAAD,EACAE,GAAA,EACAX,YAUA,OANAY,EAAAH,GAAAI,KAAAZ,EAAAD,QAAAC,IAAAD,QAAAQ,GAGAP,EAAAU,GAAA,EAGAV,EAAAD,QA0DA,OArDAQ,EAAAM,EAAAF,EAGAJ,EAAAO,EAAAR,EAGAC,EAAAQ,EAAA,SAAAhB,EAAAiB,EAAAC,GACAV,EAAAW,EAAAnB,EAAAiB,IACAG,OAAAC,eAAArB,EAAAiB,GAA0CK,YAAA,EAAAC,IAAAL,KAK1CV,EAAAgB,EAAA,SAAAxB,GACA,oBAAAyB,eAAAC,aACAN,OAAAC,eAAArB,EAAAyB,OAAAC,aAAwDC,MAAA,WAExDP,OAAAC,eAAArB,EAAA,cAAiD2B,OAAA,KAQjDnB,EAAAoB,EAAA,SAAAD,EAAAE,GAEA,GADA,EAAAA,IAAAF,EAAAnB,EAAAmB,IACA,EAAAE,EAAA,OAAAF,EACA,KAAAE,GAAA,iBAAAF,QAAAG,WAAA,OAAAH,EACA,IAAAI,EAAAX,OAAAY,OAAA,MAGA,GAFAxB,EAAAgB,EAAAO,GACAX,OAAAC,eAAAU,EAAA,WAAyCT,YAAA,EAAAK,UACzC,EAAAE,GAAA,iBAAAF,EAAA,QAAAM,KAAAN,EAAAnB,EAAAQ,EAAAe,EAAAE,EAAA,SAAAA,GAAgH,OAAAN,EAAAM,IAAqBC,KAAA,KAAAD,IACrI,OAAAF,GAIAvB,EAAA2B,EAAA,SAAAlC,GACA,IAAAiB,EAAAjB,KAAA6B,WACA,WAA2B,OAAA7B,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAO,EAAAQ,EAAAE,EAAA,IAAAA,GACAA,GAIAV,EAAAW,EAAA,SAAAiB,EAAAC,GAAsD,OAAAjB,OAAAkB,UAAAC,eAAA1B,KAAAuB,EAAAC,IAGtD7B,EAAAgC,EAAA,GAIAhC,IAAAiC,EAAA,mBClFAxC,EAAAD,QAAAM,kDCAO,SAASoC,EAASC,EAAOC,EAAuBC,EAAcC,GACnE,IAAIC,EACJ,QAF8B,IAAAH,MAAA,SAAcI,GAAM,OAAAA,SAAiB,IAAAF,UAE/DG,MAAMC,QAAQP,GAChBI,EAAQJ,MACH,CACUC,EAAWD,IAExBG,EAAUK,KAAKR,GAEjB,IAAMS,EAAWP,EAAaF,GAC1BS,IACFL,KAAWM,OAAOD,IAGtB,GAAIL,EACF,IAAK,IAAIO,EAAM,EAAGA,EAAMP,EAAMQ,OAAQD,IAChCP,EAAMO,IACRZ,EAASK,EAAMO,GAAMV,EAAYC,EAAcC,GAIrD,OAAOA,EClBT,IAAAU,EAAA,WAOE,SAAAC,EAAYd,GAFJe,KAAAC,aAGND,KAAKf,MAAQA,EAmCjB,OA/BEc,EAAAnB,UAAAsB,UAAA,SAAUC,GACRH,KAAKI,QAAUD,GAGjBJ,EAAAnB,UAAAyB,YAAA,SAAYC,GACVN,KAAKC,UAAUR,KAAKa,IAGtBP,EAAAnB,UAAA2B,UAAA,WACE,OAAOP,KAAKI,SAGdL,EAAAnB,UAAA4B,WAAA,SAAWtB,GACT,OAAIc,KAAKO,YACWvB,EAASgB,KAAKI,QAASlB,EAAY,SAACI,GAAa,OAAAA,EAAEmB,KAAKF,kBAQ9ER,EAAAnB,UAAA8B,eAAA,SAAexB,GACb,OAAOF,EAASgB,KAAKC,UAAWf,EAAY,SAACI,GAC3C,OAAOA,EAAEmB,KAAKE,iBAIlBZ,EAAAnB,UAAA+B,YAAA,WACE,OAAOX,KAAKC,WAEhBF,EA3CA,GCgBAa,EAAA,WAeE,SAAAC,EAAYtD,EAAc0B,EAAc6B,GAVxCd,KAAAe,QAAU,IAAIC,EAAA,aAWZhB,KAAKf,MAAQA,EACbe,KAAKc,QAAUpD,OAAOuD,UAAWH,GACjCd,KAAKzC,KAAOA,EACZyC,KAAKkB,OAASlB,KAAKmB,cA+FvB,OA5FEN,EAAAjC,UAAAuC,YAAA,WACE,MAAwC,mBAA7BnB,KAAKc,QAAQK,YACfnB,KAAKc,QAAQK,YAAYhE,KAAK6C,MAEhCA,KAAKc,QAAQ7C,OAGtB4C,EAAAjC,UAAA4B,WAAA,WACE,OAAOR,KAAKf,MAAMwB,KAAKD,kBAGzBK,EAAAjC,UAAA2B,UAAA,WACE,OAAOP,KAAKf,MAAMwB,KAAKF,aAGzBM,EAAAjC,UAAAwC,QAAA,WAEE,OADiBpB,KAAKf,MAAMwB,KAAKC,iBACjBb,QAGlBgB,EAAAjC,UAAAyC,UAAA,eAAAC,EAAAtB,KACE,QAAsBuB,IAAlBvB,KAAKwB,SAAwB,CAC/B,IAAMC,EAAUzB,KAAKf,MAAMwB,KAAKD,aAChC,GAAIiB,EAAS,CACX,IAAMJ,EAAYI,EAAQC,KAAK,SAACpC,GAC9B,IAAMqC,EAAarC,EAAEsC,WAAW/D,IAAIyD,EAAK/D,MACzC,GAAIoE,EACF,OAAQA,EAAW1D,UAGvB+B,KAAKwB,WAAaH,OAElBrB,KAAKwB,UAAW,EAGpB,OAAOxB,KAAKwB,UAGdX,EAAAjC,UAAAiD,IAAA,SAAI5D,EAAU6C,GACZd,KAAKkB,OAASlB,KAAK8B,cAAc7D,GAEjC+B,KAAK+B,OAAO/B,KAAKkB,OAAQJ,GACzBd,KAAKgC,iBAAiBhC,KAAKkB,OAAQJ,IAIrCD,EAAAjC,UAAAX,MAAA,WACE,OAAO+B,KAAKiC,YAGdpB,EAAAjC,UAAAmD,OAAA,SAAO9D,EAAW6C,GAChBd,KAAKkC,WAAWjE,EAAO6C,IAGzBD,EAAAjC,UAAAuD,aAAA,WACE,OAAOnC,KAAKoC,YAGdvB,EAAAjC,UAAAyD,QAAA,WACMrC,KAAKoC,YACPpC,KAAKoC,WAAWE,WAAWC,YAAYvC,KAAKoC,YAE1CpC,KAAKwC,uBACPxC,KAAKwC,yBAIT3B,EAAAjC,UAAAqD,SAAA,WACE,YAAuBV,IAAhBvB,KAAKkB,OAAuBlB,KAAKkB,OAASlB,KAAKmB,eAGxDN,EAAAjC,UAAAkD,cAAA,SAAc7D,GACZ,OAAOA,GAGT4C,EAAAjC,UAAAsD,WAAA,SAAWjE,EAAU6C,GACfd,KAAKc,QAAQ2B,OACfzC,KAAKc,QAAQ2B,MAAMtF,KAAK6C,KAAM/B,EAAO6C,IAIzCD,EAAAjC,UAAAoD,iBAAA,SAAiB/D,EAAU6C,GAA3B,IAAAQ,EAAAtB,KACE/B,OAAkBsD,IAAVtD,EAAsBA,EAAQ+B,KAAKiC,WAC3CjC,KAAKe,QAAQ2B,KAAK,UAAWzE,MAAKA,EAAE6C,QAAOA,IAC3Bd,KAAKf,MAAMwB,KAAKD,aACxBmC,QAAQ,SAACrD,GACf,IAAMsD,EAAOtD,EAAEsC,WAAW/D,IAAIyD,EAAK/D,MAC/BqF,GACFA,EAAK7B,QAAQ2B,KAAK,eAAgBzE,MAAKA,EAAE6C,QAAOA,EAAE7B,MAAOqC,EAAKrC,WAItE4B,EAlHA,6hBCTAgC,EAAA,SAAAC,GAUE,SAAAD,EAAYtF,EAAM0B,EAAO6B,GAAzB,IAAAQ,EACEwB,EAAA3F,KAAA6C,KAAMzC,EAAM0B,EAAOvB,OAAOuD,UAAW4B,EAAc/B,QAASA,KAASd,YACrEsB,EAAKO,IAAIP,EAAKrD,WAkHlB,OA9HmE8E,EAAAF,EAAAC,GAejED,EAAAjE,UAAAmD,OAAA,SAAO9D,EAAgB6C,GACrB,GAAI7C,EAAO,CAET,GADgB6C,GAAWA,EAAQkC,QAAWhD,KAAKc,QAAQkC,OAC/C,CACVhD,KAAKiD,QAAQnC,GACb,IAAMoC,EAASlD,KAAKO,YACd5B,EAAWuE,GAAUA,EAAOtB,WAAW/D,IAAImC,KAAKzC,MAClDoB,GACFA,EAASkD,IAAI5D,EAAOP,OAAOuD,UAAWH,GAAUkC,QAAQ,EAAMG,aAAa,KAG1EnD,KAAKqB,aACRrB,KAAKoD,QAAQtC,QAGfd,KAAKqD,SAASvC,IAEKA,GAAWA,EAAQqC,aAAgBnD,KAAKc,QAAQqC,cAEnEnD,KAAKsD,aAAarF,EAAO6C,IAI7B+B,EAAAjE,UAAA2E,kBAAA,eAAAjC,EAAAtB,KACE,OAAOA,KAAK/B,SAAW+B,KAAKQ,aAAagD,MAAM,SAAClE,GAC9C,IAAMX,EAAWW,EAAEsC,WAAWN,EAAK/D,MACnC,OAAOoB,GAAYA,EAASd,SAIhCgF,EAAAjE,UAAAkD,cAAA,SAAc7D,GACZ,QAASA,GAGX4E,EAAAjE,UAAAyE,SAAA,SAASvC,GACHd,KAAKc,QAAQ2C,SACfzD,KAAKc,QAAQ2C,QAAQtG,KAAK6C,KAAMc,GAElCd,KAAKkC,YAAW,EAAOpB,GACnBd,KAAKc,QAAQ4C,WAAa1D,KAAKoB,WACjCpB,KAAK2D,YAAY7C,IAIrB+B,EAAAjE,UAAAwE,QAAA,SAAQtC,GACFd,KAAKc,QAAQ8C,QACf5D,KAAKc,QAAQ8C,OAAOzG,KAAK6C,KAAMc,GAEjCd,KAAKkC,YAAW,EAAMpB,GAClBd,KAAKc,QAAQ4C,WAAa1D,KAAKoB,WACjCpB,KAAK6D,cAAc/C,IAIvB+B,EAAAjE,UAAAkF,MAAA,SAAMhD,GACJd,KAAKwB,UAAW,EAChBxB,KAAK+D,OAAOjD,IAGd+B,EAAAjE,UAAAmF,OAAA,SAAOjD,GACLd,KAAKqD,SAASvC,IAGhB+B,EAAAjE,UAAAqE,QAAA,SAAQnC,GACNd,KAAKwB,UAAW,EACZxB,KAAKiC,YACPjC,KAAKgE,SAASlD,IAIlB+B,EAAAjE,UAAAoF,SAAA,SAASlD,GACPd,KAAKoD,QAAQtC,IAGf+B,EAAAjE,UAAA+E,YAAA,SAAY7C,GACVd,KAAKf,MAAMwB,KAAKC,iBAAiBiC,QAAQ3C,KAAKiE,YAAYzF,KAAKwB,KAAMc,KAGvE+B,EAAAjE,UAAAiF,cAAA,SAAc/C,GACZd,KAAKf,MAAMwB,KAAKE,cAAcgC,QAAQ3C,KAAKkE,cAAc1F,KAAKwB,KAAMc,KAGtE+B,EAAAjE,UAAAqF,YAAA,SAAYnD,EAAwB7B,GAClC,IAAM2D,EAAO3D,EAAM2C,WAAW/D,IAAImC,KAAKzC,MACnCqF,EAAKkB,OACPlB,EAAKkB,MAAMhD,IAIf+B,EAAAjE,UAAAsF,cAAA,SAAcpD,EAAwB7B,GACpC,IAAM2D,EAAO3D,EAAM2C,WAAW/D,IAAImC,KAAKzC,MACnCqF,EAAKK,SACPL,EAAKK,QAAQnC,IAIjB+B,EAAAjE,UAAA0E,aAAA,SAAarF,EAAgB6C,GAC3B,GAAId,KAAKoB,UAEP,IADA,IAAM+C,EAASnE,KAAKf,MAAMwB,KAAKE,cACtBf,EAAM,EAAGA,EAAMuE,EAAOtE,OAAQD,IAAO,CAC5C,IACMjB,EADQwF,EAAOvE,GACEgC,WAAW/D,IAAImC,KAAKzC,MACvCoB,GACFA,EAASkD,IAAI5D,EAAKmG,KAAMtD,GACtBqC,aAAa,EACbH,QAAQ,OAtHXH,EAAA/B,SACL4C,WAAW,EACXV,QAAQ,EACRG,aAAa,EACbkB,MAAO,UAwHXxB,EA9HA,CAAmEjC,kNCenE0D,EAAA,WAYE,SAAAC,EAAYtF,EAAOuF,GANnBxE,KAAAc,WAQEd,KAAKf,MAAQA,EACbe,KAAKyE,eACLzE,KAAK0E,mBACDF,GACFA,EAAe7B,QAAQ3C,KAAK2E,oBAAoBnG,KAAKwB,OA6E3D,OAzEEuE,EAAA3F,UAAAgG,IAAA,SAAIC,GACF7E,KAAK2E,oBAAoBE,IAG3BN,EAAA3F,UAAA+F,oBAAA,SAAoBE,GAClB,IAAMC,EAAWP,EAAgBO,SAC7BC,EAAUF,EAAQE,QACtB,IAAKA,GAAWF,EAAQG,KACtB,OAAQH,EAAQG,MACd,IAAK,UACHD,EAAUD,EAASjC,cACnB,MACF,IAAK,SACHkC,EAAUD,EAASjE,aACnB,MACF,QACEkE,EAAUD,EAASjE,aAGzB,GAAIkE,EAAS,CACX,IAAMjE,EAAUmE,KAAKJ,OACrB7E,KAAKyE,YAAYI,EAAQtH,MAAQ,IAAIwH,EACnCF,EAAQtH,KACRyC,KAAKf,MACL6B,GAEFd,KAAK0E,gBAAgBjF,KAAKoF,EAAQtH,QAItCgH,EAAA3F,UAAAmD,OAAA,WACE/B,KAAKkF,OAAOvC,QAAQ,SAACrD,GACnBA,EAAEyC,YAINwC,EAAA3F,UAAAX,MAAA,SAAMV,GACJ,IAAMqF,EAAO5C,KAAKnC,IAAIN,GACtB,GAAIqF,EACF,OAAOA,EAAK3E,OAIhBsG,EAAA3F,UAAAiD,IAAA,SACEtE,EACAU,EACA6C,GACA,IAAM8B,EAAO5C,KAAKnC,IAAIN,GACtB,GAAIqF,EACF,OAAOA,EAAKf,IAAI5D,EAAO6C,IAI3ByD,EAAA3F,UAAAf,IAAA,SAAIN,GACF,OAAOyC,KAAKyE,YAAYlH,IAG1BgH,EAAA3F,UAAAsG,KAAA,eAAA5D,EAAAtB,KACE,OAAOA,KAAK0E,gBAAgBS,IAAI,SAAC7F,GAAM,OAAAgC,EAAKmD,YAAYnF,MAG1DiF,EAAA3F,UAAAyD,QAAA,WACE,IAAK,IAAMvD,KAAKkB,KAAKyE,YACnB,GAAIzE,KAAKyE,YAAY5F,eAAeC,GAAI,CACtC,IAAM8D,EAAO5C,KAAKnC,IAAIiB,GAClB8D,GAAQA,EAAKP,SACfO,EAAKP,UAIXrC,KAAKyE,YAAc,KACnBzE,KAAK0E,oBA3FAH,EAAAO,UACLjC,cAAaA,GA4FjB0B,EA/FA,GCjBIa,EAAK,EAETC,EAAA,WASE,SAAAC,EAAYxE,GAJZd,KAAAe,QAAU,IAAIC,EAAA,aAKZhB,KAAKc,QAAUpD,OAAOuD,UAAWjB,KAAKc,QAASA,GAC/Cd,KAAKuF,GAAKC,OAAOJ,KACjBpF,KAAKS,KAAO,IAAIX,EAAWE,MAM/B,OAHEsF,EAAA1G,UAAA6G,eAAA,WACEzF,KAAK4B,WAAa,IAAI0C,EAAgBtE,KAAMA,KAAKc,QAAQc,aAE7D0D,EAlBA,6hBCLAI,EAAA,SAAA5C,GAoCE,SAAA4C,EAAYP,EACAQ,EAA6B7E,EAAwBX,GADjE,IAAAmB,EAEEwB,EAAA3F,KAAA6C,KAAMtC,OAAOuD,UAAWyE,EAAc5E,QAASA,KAASd,YACxDsB,EAAK6D,IAAMA,EACX7D,EAAKqE,KAAOA,EACRxF,GACFmB,EAAKb,KAAKP,UAAUC,GAEtBmB,EAAKmE,iBACLnE,EAAKsE,SAASD,KAmClB,OAhFmCE,EAAAH,EAAA5C,GAgDjC4C,EAAA9G,UAAAgH,SAAA,SAASD,GAAT,IAAArE,EAAAtB,KACM8F,EAAWH,EAAKI,OACpB,GAAuB,UAAnBJ,EAAKK,WAA4C,SAAnBL,EAAKK,UACjCL,EAAKrF,UAAYqF,EAAKrF,SAAST,QACjC8F,EAAKrF,SAASqC,QAAQ,SAACrD,GACrB,IAAMgB,EAAW,IAAIoF,EAAcpE,EAAK6D,IAAK7F,EAAGgC,EAAKR,QAASQ,GAC9DA,EAAKb,KAAKJ,YAAYC,UAGrB,GAAuB,UAAnBqF,EAAKK,UAAuB,CACrC,IAAMC,EAAUN,EAAKO,cAAcC,cACnCR,EAAKJ,GAAKa,OAAOpG,KAAKuF,IACtB,IAAMzE,EAAOuF,KAAYV,GAAUJ,GAAII,EAAKJ,KAC5CO,EAAW9F,KAAKmF,IAAImB,SAASL,EAASnF,GAEpCgF,IACFH,EAAKI,OAASD,EACS,UAAnBH,EAAKK,WAAyBL,EAAKY,eACrCvG,KAAK4B,WAAW/D,IAAI,cAAcgE,KAAI,KAQ5C6D,EAAA9G,UAAA4H,IAAA,WAC8B,UAAxBxG,KAAK2F,KAAKK,WACZS,QAAQC,IAAI1G,KAAK2F,OA3EdD,EAAA5E,SACLc,aAEIoD,KAAM,UACNzH,KAAM,aACN4D,YAAW,WACT,IAAMlC,EAAuBe,KAAKf,MAClC,MAA6B,UAAzBA,EAAM0G,KAAKK,YAEqB,UAAzB/G,EAAM0G,KAAKK,UACb/G,EAAM0G,KAAKY,cACgB,SAAzBtH,EAAM0G,KAAKK,YAKxBvD,MAAK,SAACxE,GACJ,IAAMgB,EAAuBe,KAAKf,MACL,UAAzBA,EAAM0G,KAAKK,YACT/H,EACFgB,EAAMkG,IAAIwB,UAAU1H,EAAMsG,IAE1BtG,EAAMkG,IAAIyB,UAAU3H,EAAMsG,IAE5BtG,EAAM0G,KAAKY,cAAgBtI,OAuDvCyH,EAhFA,CAAmCL,GCLnCwB,EAAA,WA+DA,OA/DA,WACE7G,KAAA,UAAc,EACdA,KAAA,IAAQ,EACRA,KAAA,MAAU,GACVA,KAAA,MAAU,GACVA,KAAA,KAAS,GACTA,KAAA,IAAQ,GACRA,KAAA,eAAgB,GAChBA,KAAA,UAAc,GACdA,KAAA,OAAW,GACXA,KAAA,QAAY,GACZA,KAAA,UAAc,GACdA,KAAA,IAAQ,GACRA,KAAA,KAAS,GACTA,KAAA,WAAe,GACfA,KAAA,SAAa,GACbA,KAAA,YAAgB,GAChBA,KAAA,WAAe,GACfA,KAAA,OAAW,GACXA,KAAA,OAAW,GACXA,KAAA,gBAAoB,GACpBA,KAAA,iBAAqB,GACrBA,KAAA,WAAe,GACfA,KAAA,SAAa,GACbA,KAAA,SAAa,GACbA,KAAA,SAAa,GACbA,KAAA,SAAa,GACbA,KAAA,SAAa,IACbA,KAAA,SAAa,IACbA,KAAA,SAAa,IACbA,KAAA,SAAa,IACbA,KAAA,SAAa,IACbA,KAAA,SAAa,IACbA,KAAA,SAAa,IACbA,KAAA,IAAQ,IACRA,KAAA,SAAa,IACbA,KAAA,cAAkB,IAClBA,KAAA,OAAW,IACXA,KAAA,GAAO,IACPA,KAAA,GAAO,IACPA,KAAA,GAAO,IACPA,KAAA,GAAO,IACPA,KAAA,GAAO,IACPA,KAAA,GAAO,IACPA,KAAA,GAAO,IACPA,KAAA,GAAO,IACPA,KAAA,GAAO,IACPA,KAAA,IAAQ,IACRA,KAAA,IAAQ,IACRA,KAAA,IAAQ,IACRA,KAAA,SAAa,IACbA,KAAA,YAAgB,IAChBA,KAAA,cAAe,IACfA,KAAA,WAAe,IACfA,KAAA,KAAM,IACNA,KAAA,KAAM,IACNA,KAAA,KAAM,IACNA,KAAA,KAAM,IACNA,KAAA,KAAM,IACNA,KAAA,KAAM,IACNA,KAAA,MAAO,IACPA,KAAA,KAAM,IACNA,KAAA,KAAO,KA9DT,GCgBA8G,EAAA,WAUE,SAAAC,IARA/G,KAAAgH,aAAe,IAAIH,EAEnB7G,KAAAiH,QAOEjH,KAAKkH,eAAiBlH,KAAKmH,cAAc3I,KAAKwB,MAC9CA,KAAKoH,aAAepH,KAAKqH,YAAY7I,KAAKwB,MAC1CA,KAAKsH,cAAgBtH,KAAKuH,aAAa/I,KAAKwB,MAC5CA,KAAKwH,4BAqCT,OAlCET,EAAAnI,UAAA6I,QAAA,SAAQC,GACN,IAAMC,EAAO3H,KAAKgH,aAAaU,GAC/B,GAAIC,EACF,OAAO3H,KAAKiH,KAAKU,IAIrBZ,EAAAnI,UAAA4I,0BAAA,WACE7K,OAAOiL,iBAAiB,QAAS5H,KAAKkH,gBAAgB,GACtDvK,OAAOiL,iBAAiB,UAAW5H,KAAKoH,cAAc,GACtDzK,OAAOiL,iBAAiB,QAAS5H,KAAKsH,eAAe,IAGvDP,EAAAnI,UAAAiJ,6BAAA,WACElL,OAAOmL,oBAAoB,QAAS9H,KAAKkH,gBAAgB,GACzDvK,OAAOmL,oBAAoB,UAAW9H,KAAKoH,cAAc,GACzDzK,OAAOmL,oBAAoB,QAAS9H,KAAKsH,eAAe,IAGlDP,EAAAnI,UAAAyI,YAAR,SAAoBU,GAClBA,EAAEC,kBACGhI,KAAKiH,KAAKc,EAAEE,WACfjI,KAAKiH,KAAKc,EAAEE,UAAW,IAInBlB,EAAAnI,UAAA2I,aAAR,SAAqBQ,GACnBA,EAAEC,kBACFhI,KAAKiH,KAAKc,EAAEE,UAAW,GAGjBlB,EAAAnI,UAAAuI,cAAR,WACEnH,KAAKiH,SAETF,EAnDA,GChBarJ,OAAOkB,UAAUsJ,i/DCW9BC,EAAA,WAyBE,SAAAC,EAAYC,GArBZrI,KAAAsI,kBAAoB,YACpBtI,KAAAuI,iBAAmB,YAMnBvI,KAAAe,QAAqE,IAAIC,EAAA,aAEzEhB,KAAAiH,KAAa,IAAIH,EAOT9G,KAAAwI,mBAAoB,EAEpBxI,KAAAyI,eAINzI,KAAKmF,IAAMkD,EAAWK,WACtB1I,KAAK2I,aAAeN,EAAWO,gBAE/B5I,KAAK6I,sBAuLT,OApLQT,EAAAxJ,UAAAN,OAAN,SAAawC,kGAEXd,KAAKc,QDUF,SAASgI,EAAUC,EAAQC,EAAKC,QAAA,IAAAA,OAAA,GACrC,IAAMC,EAAQ3J,MAAMC,QAAQwJ,GACxBG,EAAWD,UAwCf,OAtCIA,EAEED,GACFF,EAASA,MACTI,EAAMA,EAAIxJ,OAAOoJ,GACjBC,EAAIrG,QAAQ,SAASoF,EAAG/K,QACA,IAAXmM,EAAInM,GACbmM,EAAInM,GAAK+K,EACa,iBAANA,EAChBoB,EAAInM,GAAK8L,EAAUC,EAAO/L,GAAI+K,EAAGkB,IAEN,IAAvBF,EAAOK,QAAQrB,IACjBoB,EAAI1J,KAAKsI,MAKfoB,EAAMH,GAIJD,GAA4B,iBAAXA,GACnBrL,OAAOuJ,KAAK8B,GAAQpG,QAAQ,SAASpE,GACnC4K,EAAI5K,GAAOwK,EAAOxK,KAGtBb,OAAOuJ,KAAK+B,GAAKrG,QAAQ,SAASpE,GACR,iBAAbyK,EAAIzK,IAAsByK,EAAIzK,IAGlCwK,EAAOxK,GAGV4K,EAAI5K,GAAOuK,EAAUC,EAAOxK,GAAMyK,EAAIzK,GAAM0K,GAL9CE,EAAI5K,GAAOyK,EAAIzK,MAUd4K,ECpDUL,CAAU9I,KAAKc,YAAeA,GAExCd,KAAKqJ,WAAYrJ,KAAK2I,aAAa9I,QAApC,MACF,EAAMG,KAAKsJ,sBAAXC,EAAAC,wBAGF,SAAMxJ,KAAKyJ,oBACX,OADAF,EAAAC,QACA,EAAOxJ,YAGHoI,EAAAxJ,UAAA0K,YAAN,0HACE,OAAItJ,KAAKqJ,UACP,EAAOK,QAAQC,QAAQ3J,KAAKqJ,WAE1BrJ,KAAKwI,mBAEP,EAAO,IAAIkB,QAAqB,SAACC,GAC/B,IAAMC,EAAS,SAACtK,GACdqK,EAAQrK,GACRgC,EAAKP,QAAQ8I,eAAe,gBAAiBD,IAE/CtI,EAAKP,QAAQ+I,GAAG,gBAAiBF,OAPjC,YAWF5J,KAAKwI,mBAAoB,EACrBa,OAAQ,yCAEVA,SAEkBE,EAAAvJ,KAAK2I,aAAaoB,OAAO,SAACzK,GAAM,OAAAA,EAAEgK,sCAAlCU,EAAAT,EAAA1J,QACA,GADPoK,EAAGV,EAAAS,IACcV,YAAYnM,KAAK8M,EAAKjK,QADc,aACxDkK,EAAUC,EAAAX,SAEd9L,OAAOuD,OAAOoI,EAAUa,2BAHVF,oCAQlB,iBADAhK,KAAKwI,mBAAoB,EACnB,IAAI4B,MAAMC,UAElB,GAAIhB,EAIF,OAHArJ,KAAKqJ,SAAWA,EAChBrJ,KAAKwI,mBAAoB,EACzBxI,KAAKe,QAAQ2B,KAAK,gBAAiB2G,IACnC,EAAOA,oCAKbjB,EAAAxJ,UAAA0L,aAAA,SACEC,EACAC,EACA1J,GAHF,IAAAQ,EAAAtB,KAKE,OAAOA,KAAKmF,IAAImB,SAASkE,EAAUC,KAAK3J,GAAcyE,GAAIgF,KAAe,GAAMG,KAAK,SAACC,GAInF,OAHIA,GACFrJ,EAAKmH,YAAYhJ,KAAKkL,EAAMpN,MAEvBoN,KAIXvC,EAAAxJ,UAAAgM,YAAA,SAAYL,GACV,OAAgD,IAAzCvK,KAAKyI,YAAYW,QAAQmB,IAIpBnC,EAAAxJ,UAAA6K,UAAd,mHAoBE,OAnBIzJ,KAAKqJ,WACDE,EAA2DvJ,KAAKqJ,SAA9DwB,EAAatB,EAAAsB,cAAEC,EAAWvB,EAAAuB,YAAEC,EAAUxB,EAAAwB,WAAEC,EAAYzB,EAAAyB,aACxDH,GAAiBC,GAAeC,GAAcC,IAChDhL,KAAKiL,SAAWH,EAAaD,EAAeG,EAAcD,IACpDG,EAASlL,KAAKiL,SACT,GAAK,KACdC,EAAO,GAAK,IAEVA,EAAO,IAAM,KACfA,EAAO,IAAM,MAInBlL,KAAKmF,IAAImD,kBAAoBtI,KAAKsI,kBAClCtI,KAAKmF,IAAIoD,iBAAmBvI,KAAKuI,iBAEjCvI,KAAKmF,IAAI7G,OAAO0B,KAAKc,SAErBd,KAAKmL,kBACL,EAAMnL,KAAKoL,6BAIX,OAJAjB,EAAAX,OAEAxJ,KAAKqL,uBACLrL,KAAKe,QAAQ2B,KAAK,YAAa1C,KAAKmF,MACpC,EAAOnF,YAGKoI,EAAAxJ,UAAAuM,eAAd,2GACmB,SAAMnL,KAAKsJ,6BAAtBD,EAAWE,EAAAC,UAET8B,EAAYjC,EAASkC,aAEzBvL,KAAKwL,OAAS,IAAI9F,EAAc1F,KAAKmF,IAAKmG,GAC1CtL,KAAKe,QAAQ2B,KAAK,aAAc1C,KAAKwL,mBAKnCpD,EAAAxJ,UAAAyM,qBAAR,WAoBE,GAAIrL,KAAKiL,QACPjL,KAAKmF,IAAIqB,IAAIxG,KAAKiL,aACb,CACC,IAAA1B,EAAAvJ,KAAAc,QAAE2K,EAAAlC,EAAAkC,OAAQC,EAAAnC,EAAAmC,KAEZD,GACFzL,KAAKmF,IAAIwG,UAAUF,GAEjBC,GACF1L,KAAKmF,IAAIyG,QAAQF,KAKTtD,EAAAxJ,UAAAwM,mBAAd,wMAG4BS,EAAAC,EAAA9L,KAAK2I,aAAaoB,OAAO,SAACzK,GAAM,OAAAA,EAAEyM,+FACvC,GADF9B,EAAG+B,EAAA/N,OACS8N,iBAAiB5O,KAAK8M,gBAA3CgC,EAAWC,EAAA1C,QACb,wDAC0B2C,EAAAL,EAAAG,8EAEP,GAFJhG,EAAOmG,EAAAnO,OAEWoO,cAAcrM,KAAKmF,cAA9CmH,EAAaJ,EAAA1C,UAEjBxJ,KAAKmF,IAAIoH,cAActG,EAAQ1I,MAAQ+O,ilBAM/C,iBAAM,IAAIlC,MAAMoC,2BAOZpE,EAAAxJ,UAAAiK,oBAAR,eAAAvH,EAAAtB,KAEEA,KAAKmF,IAAIpE,QAAQ+I,GAAG,QAAS,SAAC2C,GAAsB,OAAAnL,EAAKoL,YAAYD,MAG/DrE,EAAAxJ,UAAA8N,YAAR,SAAoBD,GAApB,IAAAnL,EAAAtB,KACEA,KAAKe,QAAQ2B,KAAK,QAAS+J,GAC3BzM,KAAK2I,aAAahG,QAAQ,SAACrD,GACrBA,EAAEqN,YACJrN,EAAEqN,WAAWF,EAAInL,MAOzB8G,EApNA,GCXAtL,EAAAQ,EAAAsP,EAAA,kCAAAlH,IAUekH,EAAA","file":"webmap.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"events\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"events\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"WebMap\"] = factory(require(\"events\"));\n\telse\n\t\troot[\"WebMap\"] = factory(root[\"events\"]);\n})(window, function(__WEBPACK_EXTERNAL_MODULE__0__) {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n","module.exports = __WEBPACK_EXTERNAL_MODULE__0__;","export function filterIn(entry, filterFunc = (x) => x, relationFunc, _filtered = []) {\r\n  let child;\r\n  if (Array.isArray(entry)) {\r\n    child = entry;\r\n  } else {\r\n    const filter = filterFunc(entry);\r\n    if (filter) {\r\n      _filtered.push(entry);\r\n    }\r\n    const relChild = relationFunc(entry);\r\n    if (relChild) {\r\n      child = [].concat(relChild);\r\n    }\r\n  }\r\n  if (child) {\r\n    for (let fry = 0; fry < child.length; fry++) {\r\n      if (child[fry]) {\r\n        filterIn(child[fry], filterFunc, relationFunc, _filtered);\r\n      }\r\n    }\r\n  }\r\n  return _filtered;\r\n}\r\n","import { Entry } from './Entry';\r\nimport { filterIn } from './TreeUtil';\r\n\r\nexport class TreeHelper {\r\n\r\n  entry: Entry;\r\n\r\n  private _parent?: Entry;\r\n  private _children?: Entry[] = [];\r\n\r\n  constructor(entry: Entry) {\r\n    this.entry = entry;\r\n  }\r\n\r\n  // region Parents\r\n  setParent(parent: Entry) {\r\n    this._parent = parent;\r\n  }\r\n\r\n  addChildren(children: Entry) {\r\n    this._children.push(children);\r\n  }\r\n\r\n  getParent(): Entry {\r\n    return this._parent;\r\n  }\r\n\r\n  getParents(filterFunc?: (entry: Entry) => boolean): Entry[] {\r\n    if (this.getParent()) {\r\n      const generator = filterIn(this._parent, filterFunc, (x: Entry) => x.tree.getParent());\r\n      return generator;\r\n    }\r\n    return [];\r\n  }\r\n  // endregion\r\n\r\n  // region Child\r\n  getDescendants(filterFunc?: (entry: Entry) => boolean): any[] {\r\n    return filterIn(this._children, filterFunc, (x) => {\r\n      return x.tree.getChildren();\r\n    });\r\n  }\r\n\r\n  getChildren(): Entry[] {\r\n    return this._children;\r\n  }\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport {Entry} from '../Entry';\r\n// import StrictEventEmitter from 'strict-event-emitter-types/types/src';\r\n\r\nexport interface IEntryBasePropertyOptions<V> {\r\n  hierarchy?: boolean;\r\n  bubble?: boolean;\r\n  propagation?: boolean;\r\n  silent?: boolean;\r\n  value?: V;\r\n  getProperty?: () => V;\r\n  onSet?: (value: V, options?: IEntryBasePropertyOptions<V>) => void;\r\n}\r\n\r\n// export interface BasePropertyEvents<V, O> {\r\n//   'change': {value: V, options: O};\r\n//   'change-tree': {value: V, options: O, entry: Entry};\r\n// }\r\n\r\nexport class BaseProperty<V = any, O extends IEntryBasePropertyOptions<V> = IEntryBasePropertyOptions<V> > {\r\n\r\n  options: O;\r\n\r\n  // emitter: StrictEventEmitter<EventEmitter, BasePropertyEvents<V, O>> = new EventEmitter();\r\n  emitter = new EventEmitter();\r\n  name: string;\r\n\r\n  entry: Entry;\r\n  _blocked: boolean;\r\n\r\n  private _value: V;\r\n  private _removeEventsListener?: () => void;\r\n  private _container: HTMLElement;\r\n\r\n  constructor(name: string, entry: Entry, options: O) {\r\n    this.entry = entry;\r\n    this.options = Object.assign({}, options);\r\n    this.name = name;\r\n    this._value = this.getProperty();\r\n  }\r\n\r\n  getProperty() {\r\n    if (typeof this.options.getProperty === 'function') {\r\n      return this.options.getProperty.call(this);\r\n    }\r\n    return this.options.value;\r\n  }\r\n\r\n  getParents(): Entry[] {\r\n    return this.entry.tree.getParents() || [];\r\n  }\r\n\r\n  getParent() {\r\n    return this.entry.tree.getParent();\r\n  }\r\n\r\n  isGroup() {\r\n    const children = this.entry.tree.getDescendants();\r\n    return children.length;\r\n  }\r\n\r\n  isBlocked() {\r\n    if (this._blocked === undefined) {\r\n      const parents = this.entry.tree.getParents();\r\n      if (parents) {\r\n        const isBlocked = parents.find((x: Entry) => {\r\n          const parentProp = x.properties.get(this.name);\r\n          if (parentProp) {\r\n            return !parentProp.value();\r\n          }\r\n        });\r\n        this._blocked = !!isBlocked;\r\n      } else {\r\n        this._blocked = false;\r\n      }\r\n    }\r\n    return this._blocked;\r\n  }\r\n\r\n  set(value: V, options?: O) {\r\n    this._value = this._prepareValue(value);\r\n\r\n    this.update(this._value, options);\r\n    this._fireChangeEvent(this._value, options);\r\n  }\r\n\r\n  // shortcut for getValue\r\n  value(): V {\r\n    return this.getValue();\r\n  }\r\n\r\n  update(value?: V, options?: O) {\r\n    this._callOnSet(value, options);\r\n  }\r\n\r\n  getContainer() {\r\n    return this._container;\r\n  }\r\n\r\n  destroy() {\r\n    if (this._container) {\r\n      this._container.parentNode.removeChild(this._container);\r\n    }\r\n    if (this._removeEventsListener) {\r\n      this._removeEventsListener();\r\n    }\r\n  }\r\n\r\n  getValue(): V {\r\n    return this._value !== undefined ? this._value : this.getProperty();\r\n  }\r\n\r\n  _prepareValue(value: V): V {\r\n    return value;\r\n  }\r\n\r\n  _callOnSet(value: V, options: O) {\r\n    if (this.options.onSet) {\r\n      this.options.onSet.call(this, value, options);\r\n    }\r\n  }\r\n\r\n  _fireChangeEvent(value: V, options: O) {\r\n    value = value !== undefined ? value : this.getValue();\r\n    this.emitter.emit('change', {value, options});\r\n    const parents = this.entry.tree.getParents();\r\n    parents.forEach((x) => {\r\n      const prop = x.properties.get(this.name);\r\n      if (prop) {\r\n        prop.emitter.emit('change-tree', {value, options, entry: this.entry});\r\n      }\r\n    });\r\n  }\r\n}\r\n","import {BaseProperty, IEntryBasePropertyOptions} from './BaseProperty';\r\nimport {Entry} from '../Entry';\r\n\r\ninterface ICheckOptions extends IEntryBasePropertyOptions<boolean> {\r\n  label?: string;\r\n\r\n  turnOff?: () => void;\r\n  turnOn?: () => void;\r\n}\r\n\r\nexport class CheckProperty<V = boolean, O = ICheckOptions> extends BaseProperty<boolean, ICheckOptions> {\r\n\r\n  static options: ICheckOptions = {\r\n    hierarchy: true,\r\n    bubble: false,\r\n    propagation: false,\r\n    label: 'Toggle',\r\n    // PropertyContainer: IndicatorContainer\r\n  };\r\n\r\n  constructor(name, entry, options) {\r\n    super(name, entry, Object.assign({}, CheckProperty.options, options));\r\n    this.set(this.value());\r\n  }\r\n\r\n  update(value: boolean, options: ICheckOptions) {\r\n    if (value) {\r\n      const bubble = (options && options.bubble) || this.options.bubble;\r\n      if (bubble) {\r\n        this.unBlock(options);\r\n        const parent = this.getParent();\r\n        const property = parent && parent.properties.get(this.name);\r\n        if (property) {\r\n          property.set(value, Object.assign({}, options, {bubble: true, propagation: false}));\r\n        }\r\n      }\r\n      if (!this.isBlocked()) {\r\n        this._turnOn(options);\r\n      }\r\n    } else {\r\n      this._turnOff(options);\r\n    }\r\n    const propagation = (options && options.propagation) || this.options.propagation;\r\n    if (propagation) {\r\n      this._propagation(value, options);\r\n    }\r\n  }\r\n\r\n  getHierarchyValue() {\r\n    return this.value() && this.getParents().every((x) => {\r\n      const property = x.properties[this.name];\r\n      return property && property.get();\r\n    });\r\n  }\r\n\r\n  _prepareValue(value: boolean) {\r\n    return !!value;\r\n  }\r\n\r\n  _turnOff(options: ICheckOptions) {\r\n    if (this.options.turnOff) {\r\n      this.options.turnOff.call(this, options);\r\n    }\r\n    this._callOnSet(false, options);\r\n    if (this.options.hierarchy && this.isGroup()) {\r\n      this.blockChilds(options);\r\n    }\r\n  }\r\n\r\n  _turnOn(options: ICheckOptions) {\r\n    if (this.options.turnOn) {\r\n      this.options.turnOn.call(this, options);\r\n    }\r\n    this._callOnSet(true, options);\r\n    if (this.options.hierarchy && this.isGroup()) {\r\n      this.unblockChilds(options);\r\n    }\r\n  }\r\n\r\n  block(options: ICheckOptions) {\r\n    this._blocked = true;\r\n    this._block(options);\r\n  }\r\n\r\n  _block(options: ICheckOptions) {\r\n    this._turnOff(options);\r\n  }\r\n\r\n  unBlock(options: ICheckOptions) {\r\n    this._blocked = false;\r\n    if (this.getValue()) {\r\n      this._unBlock(options);\r\n    }\r\n  }\r\n\r\n  _unBlock(options: ICheckOptions) {\r\n    this._turnOn(options);\r\n  }\r\n\r\n  blockChilds(options: ICheckOptions) {\r\n    this.entry.tree.getDescendants().forEach(this._blockChild.bind(this, options));\r\n  }\r\n\r\n  unblockChilds(options: ICheckOptions) {\r\n    this.entry.tree.getChildren().forEach(this._unBlockChild.bind(this, options));\r\n  }\r\n\r\n  _blockChild(options: ICheckOptions, entry: Entry) {\r\n    const prop = entry.properties.get(this.name) as CheckProperty;\r\n    if (prop.block) {\r\n      prop.block(options);\r\n    }\r\n  }\r\n\r\n  _unBlockChild(options: ICheckOptions, entry: Entry) {\r\n    const prop = entry.properties.get(this.name) as CheckProperty;\r\n    if (prop.unBlock) {\r\n      prop.unBlock(options);\r\n    }\r\n  }\r\n\r\n  _propagation(value: boolean, options: ICheckOptions) {\r\n    if (this.isGroup()) {\r\n      const childs = this.entry.tree.getChildren();\r\n      for (let fry = 0; fry < childs.length; fry++) {\r\n        const child = childs[fry];\r\n        const property = child.properties.get(this.name) as CheckProperty;\r\n        if (property) {\r\n          property.set(value, {...options, ...{\r\n            propagation: true,\r\n            bubble: false,\r\n          }});\r\n        }\r\n      }\r\n    }\r\n  }\r\n}\r\n","import { BaseProperty, IEntryBasePropertyOptions } from './BaseProperty';\r\nimport { CheckProperty } from './CheckProperty';\r\nimport { Entry } from '../Entry';\r\nimport { Type } from '../../../utils/Type';\r\n\r\nexport interface IEntryPropertyTypes {\r\n  'boolean': boolean;\r\n  'string': string;\r\n  'number': number;\r\n  'any': any;\r\n}\r\n\r\ninterface IEntryPropertyBaseConfig<K extends keyof IEntryPropertyTypes = any> {\r\n  type?: IEntryPropertyTypes[K];\r\n  name?: string;\r\n}\r\nexport interface IEntryPropertyConfig<K extends keyof IEntryPropertyTypes> extends IEntryPropertyBaseConfig<K> {\r\n  handler?: Type<BaseProperty<IEntryPropertyTypes[K]>>;\r\n}\r\n\r\nexport interface IEntryPropertyConfig<K extends keyof IEntryPropertyTypes> extends IEntryPropertyBaseConfig<K> {\r\n  getProperty?(): IEntryPropertyTypes[K];\r\n  onSet?(value: IEntryPropertyTypes[K], options?: IEntryBasePropertyOptions<IEntryPropertyTypes[K]>): void;\r\n}\r\n\r\nexport class EntryProperties {\r\n\r\n  static handlers: { [name: string]: Type<BaseProperty> } = {\r\n    CheckProperty,\r\n  };\r\n\r\n  options = {};\r\n  entry: Entry;\r\n\r\n  private _properties: { [propName: string]: BaseProperty };\r\n  private _propertiesList: string[];\r\n\r\n  constructor(entry, propertiesList?: Array<IEntryPropertyConfig<keyof IEntryPropertyTypes>>) {\r\n\r\n    this.entry = entry;\r\n    this._properties = {};\r\n    this._propertiesList = []; // ordered list\r\n    if (propertiesList) {\r\n      propertiesList.forEach(this._setPropertyHandler.bind(this));\r\n    }\r\n  }\r\n\r\n  add(propOpt: IEntryPropertyConfig<keyof IEntryPropertyTypes>) {\r\n    this._setPropertyHandler(propOpt);\r\n  }\r\n\r\n  _setPropertyHandler(propOpt: IEntryPropertyConfig<keyof IEntryPropertyTypes>) {\r\n    const handlers = EntryProperties.handlers;\r\n    let handler = propOpt.handler;\r\n    if (!handler && propOpt.type) {\r\n      switch (propOpt.type) {\r\n        case 'boolean':\r\n          handler = handlers.CheckProperty;\r\n          break;\r\n        case 'string':\r\n          handler = handlers.BaseProperty;\r\n          break;\r\n        default:\r\n          handler = handlers.BaseProperty;\r\n      }\r\n    }\r\n    if (handler) {\r\n      const options = { ...propOpt || {} };\r\n      this._properties[propOpt.name] = new handler(\r\n        propOpt.name,\r\n        this.entry,\r\n        options,\r\n      );\r\n      this._propertiesList.push(propOpt.name);\r\n    }\r\n  }\r\n\r\n  update() {\r\n    this.list().forEach((x) => {\r\n      x.update();\r\n    });\r\n  }\r\n\r\n  value(name) {\r\n    const prop = this.get(name);\r\n    if (prop) {\r\n      return prop.value;\r\n    }\r\n  }\r\n\r\n  set<K extends keyof IEntryPropertyTypes>(\r\n    name: string,\r\n    value: IEntryPropertyTypes[K],\r\n    options?: IEntryBasePropertyOptions<IEntryPropertyTypes[K]>) {\r\n    const prop = this.get(name);\r\n    if (prop) {\r\n      return prop.set(value, options);\r\n    }\r\n  }\r\n\r\n  get(name) {\r\n    return this._properties[name];\r\n  }\r\n\r\n  list() {\r\n    return this._propertiesList.map((x) => this._properties[x]);\r\n  }\r\n\r\n  destroy() {\r\n    for (const p in this._properties) {\r\n      if (this._properties.hasOwnProperty(p)) {\r\n        const prop = this.get(p);\r\n        if (prop && prop.destroy) {\r\n          prop.destroy();\r\n        }\r\n      }\r\n    }\r\n    this._properties = null;\r\n    this._propertiesList = [];\r\n  }\r\n}\r\n","import { EventEmitter } from 'events';\r\nimport {TreeHelper} from './TreeHelper';\r\nimport {EntryProperties, IEntryPropertyConfig, IEntryPropertyTypes} from './properties/EntryProperties';\r\n\r\nexport interface EntryOptions {\r\n  properties?: Array<IEntryPropertyConfig<keyof IEntryPropertyTypes>>;\r\n}\r\n\r\nlet ID = 0;\r\n\r\nexport class Entry<O extends EntryOptions = EntryOptions> {\r\n\r\n  options: O;\r\n  id: string;\r\n\r\n  emitter = new EventEmitter();\r\n  properties: EntryProperties;\r\n  tree: TreeHelper;\r\n\r\n  constructor(options: EntryOptions) {\r\n    this.options = Object.assign({}, this.options, options);\r\n    this.id = String(ID++);\r\n    this.tree = new TreeHelper(this);\r\n  }\r\n\r\n  initProperties() {\r\n    this.properties = new EntryProperties(this, this.options.properties);\r\n  }\r\n}\r\n","import { Entry, EntryOptions } from './components/entry/Entry';\r\nimport { TreeGroup, TreeLayer } from './interfaces/AppSettings';\r\nimport { MapAdapter } from './interfaces/MapAdapter';\r\nimport { LayerAdapters, AdapterOptions } from './interfaces/LayerAdapter';\r\n\r\nexport class WebLayerEntry extends Entry<EntryOptions> {\r\n  static options: EntryOptions = {\r\n    properties: [\r\n      {\r\n        type: 'boolean',\r\n        name: 'visibility',\r\n        getProperty() {\r\n          const entry: WebLayerEntry = this.entry;\r\n          if (entry.item.item_type === 'group') {\r\n            return true;\r\n          } else if (entry.item.item_type === 'layer') {\r\n            return entry.item.layer_enabled;\r\n          } else if (entry.item.item_type === 'root') {\r\n            return true;\r\n          }\r\n          return false;\r\n        },\r\n        onSet(value: boolean) {\r\n          const entry: WebLayerEntry = this.entry;\r\n          if (entry.item.item_type === 'layer') {\r\n            if (value) {\r\n              entry.map.showLayer(entry.id);\r\n            } else {\r\n              entry.map.hideLayer(entry.id);\r\n            }\r\n            entry.item.layer_enabled = value;\r\n          }\r\n        },\r\n      },\r\n    ],\r\n  };\r\n\r\n  map: MapAdapter<any>;\r\n\r\n  item: TreeGroup | TreeLayer;\r\n\r\n  constructor(map: MapAdapter<any>,\r\n              item: TreeGroup | TreeLayer, options?: EntryOptions, parent?: WebLayerEntry) {\r\n    super(Object.assign({}, WebLayerEntry.options, options));\r\n    this.map = map;\r\n    this.item = item;\r\n    if (parent) {\r\n      this.tree.setParent(parent);\r\n    }\r\n    this.initProperties();\r\n    this.initItem(item);\r\n  }\r\n\r\n  initItem(item: TreeGroup | TreeLayer) {\r\n    let newLayer = item._layer;\r\n    if (item.item_type === 'group' || item.item_type === 'root') {\r\n      if (item.children && item.children.length) {\r\n        item.children.forEach((x) => {\r\n          const children = new WebLayerEntry(this.map, x, this.options, this);\r\n          this.tree.addChildren(children);\r\n        });\r\n      }\r\n    } else if (item.item_type === 'layer') {\r\n      const adapter = item.layer_adapter.toUpperCase() as keyof LayerAdapters;\r\n      item.id = Number(this.id);\r\n      const options: any = {...item, ...{id: item.id}};\r\n      newLayer = this.map.addLayer(adapter, options);\r\n    }\r\n    if (newLayer) {\r\n      item._layer = newLayer;\r\n      if (item.item_type === 'layer' && item.layer_enabled) {\r\n        this.properties.get('visibility').set(true);\r\n      }\r\n    } else {\r\n      // this.properties.get('visibility').set(true);\r\n    }\r\n  }\r\n\r\n  // region layer control\r\n  fit(): void {\r\n    if (this.item.item_type === 'layer') {\r\n      console.log(this.item);\r\n    }\r\n  }\r\n  //\r\n}\r\n","export class KeyCodes {\r\n  'backspace' = 8;\r\n  'tab' = 9;\r\n  'enter' = 13;\r\n  'shift' = 16;\r\n  'ctrl' = 17;\r\n  'alt' = 18;\r\n  'pause/break' = 19;\r\n  'caps_lock' = 20;\r\n  'escape' = 27;\r\n  'page_up' = 33;\r\n  'page_down' = 34;\r\n  'end' = 35;\r\n  'home' = 36;\r\n  'left_arrow' = 37;\r\n  'up_arrow' = 38;\r\n  'right_arrow' = 39;\r\n  'down_arrow' = 40;\r\n  'insert' = 45;\r\n  'delete' = 46;\r\n  'left_window_key' = 91;\r\n  'right_window_key' = 92;\r\n  'select_key' = 93;\r\n  'numpad_0' = 96;\r\n  'numpad_1' = 97;\r\n  'numpad_2' = 98;\r\n  'numpad_3' = 99;\r\n  'numpad_4' = 100;\r\n  'numpad_5' = 101;\r\n  'numpad_6' = 102;\r\n  'numpad_7' = 103;\r\n  'numpad_8' = 104;\r\n  'numpad_9' = 105;\r\n  'multiply' = 106;\r\n  'add' = 107;\r\n  'subtract' = 109;\r\n  'decimal_point' = 110;\r\n  'divide' = 111;\r\n  'f1' = 112;\r\n  'f2' = 113;\r\n  'f3' = 114;\r\n  'f4' = 115;\r\n  'f5' = 116;\r\n  'f6' = 117;\r\n  'f7' = 118;\r\n  'f8' = 119;\r\n  'f9' = 120;\r\n  'f10' = 121;\r\n  'f11' = 122;\r\n  'f12' = 123;\r\n  'num_lock' = 144;\r\n  'scroll_lock' = 145;\r\n  'semi-colon' = 186;\r\n  'equal_sign' = 187;\r\n  ',' = 188; // \"comma\";\r\n  '-' = 189; // \"dash\";\r\n  '.' = 190; // \"period\";\r\n  '/' = 191; // \"forward slash\";\r\n  '`' = 192; // \"grave accent\";\r\n  '[' = 219; // \"open bracket\";\r\n  '\\\\' = 220; // \"back slash\";\r\n  ']' = 221; // \"close braket\";\r\n  '\\'' = 222; // \"single quote\"\r\n}\r\n","import {KeyCodes} from './KeysCodes';\r\n\r\n/**\r\n * @param {string} key - key symbol\r\n * @param {string} func - action on key press\r\n * @param {number} [keyCode] - key code for special button like tab\r\n *\r\n * @export\r\n * @interface IKeyControl\r\n */\r\nexport interface IKeyControl {\r\n  key?: string;\r\n  keyCode?: number;\r\n  func: () => void;\r\n}\r\n\r\nexport class Keys {\r\n\r\n  keyCodeAlias = new KeyCodes();\r\n\r\n  keys: {[keyCode: number]: boolean} = {};\r\n\r\n  private _windowOnFocus?: () => void;\r\n  private _keysPressed?: () => void;\r\n  private _keysReleased?: () => void;\r\n\r\n  constructor() {\r\n    this._windowOnFocus = this.windowOnFocus.bind(this);\r\n    this._keysPressed = this.keysPressed.bind(this);\r\n    this._keysReleased = this.keysReleased.bind(this);\r\n    this.addKeyboardEventsListener();\r\n  }\r\n\r\n  pressed(keyName: keyof KeyCodes): boolean {\r\n    const code = this.keyCodeAlias[keyName];\r\n    if (code) {\r\n      return this.keys[code];\r\n    }\r\n  }\r\n\r\n  addKeyboardEventsListener() {\r\n    window.addEventListener('focus', this._windowOnFocus, false);\r\n    window.addEventListener('keydown', this._keysPressed, false);\r\n    window.addEventListener('keyup', this._keysReleased, false);\r\n  }\r\n\r\n  removeKeyboardEventsListener() {\r\n    window.removeEventListener('focus', this._windowOnFocus, false);\r\n    window.removeEventListener('keydown', this._keysPressed, false);\r\n    window.removeEventListener('keyup', this._keysReleased, false);\r\n  }\r\n\r\n  private keysPressed(e) {\r\n    e.stopPropagation();\r\n    if (!this.keys[e.keyCode]) {\r\n      this.keys[e.keyCode] = true;\r\n    }\r\n  }\r\n\r\n  private keysReleased(e) {\r\n    e.stopPropagation();\r\n    this.keys[e.keyCode] = false;\r\n  }\r\n\r\n  private windowOnFocus() {\r\n    this.keys = {};\r\n  }\r\n}\r\n","const opts = Object.prototype.toString;\r\n\r\nexport function isString(it) {\r\n  return (typeof it === 'string' || it instanceof String); // Boolean\r\n}\r\n\r\n/**\r\n * Return true if it is a Function\r\n * @param it Item to test.\r\n */\r\nexport function isFunction(it) {\r\n  return opts.call(it) === '[object Function]';\r\n}\r\n\r\nexport function getProp(parts: any[], create: boolean, context: object) {\r\n  try {\r\n    for (let i = 0; i < parts.length; i++) {\r\n      const p = parts[i];\r\n      if (!(p in context)) {\r\n        if (create) {\r\n          context[p] = {};\r\n        } else {\r\n          return;\t\t// return undefined\r\n        }\r\n      }\r\n      context = context[p];\r\n    }\r\n    return context; // mixed\r\n  } catch (e) {\r\n    // \"p in context\" throws an exception when context is a number, boolean, etc. rather than an object,\r\n    // so in that corner case just return undefined (by having no return statement)\r\n  }\r\n}\r\n\r\nexport function setObject(name: string, value, context: object) {\r\n  const parts = name.split('.');\r\n  const p = parts.pop();\r\n  const obj = getProp(parts, true, context);\r\n  return obj && p ? (obj[p] = value) : undefined; // Object\r\n}\r\n\r\nexport function hitch(scope, method) {\r\n\r\n  if (!method) {\r\n    method = scope;\r\n    scope = null;\r\n  }\r\n  if (isString(method)) {\r\n    scope = scope;\r\n    if (!scope[method]) {throw (['lang.hitch: scope[\"', method, '\"] is null (scope=\"', scope, '\")'].join('')); }\r\n    return function() {return scope[method].apply(scope, arguments || []); }; // Function\r\n  }\r\n  return !scope ? method : function() {return method.apply(scope, arguments || []); }; // Function\r\n}\r\n\r\nexport function deepmerge(target, src, mergeArray = false) {\r\n  const array = Array.isArray(src);\r\n  let dst: any = array && [] || {};\r\n\r\n  if (array) {\r\n\r\n    if (mergeArray) {\r\n      target = target || [];\r\n      dst = dst.concat(target);\r\n      src.forEach(function(e, i) {\r\n        if (typeof dst[i] === 'undefined') {\r\n          dst[i] = e;\r\n        } else if (typeof e === 'object') {\r\n          dst[i] = deepmerge(target[i], e, mergeArray);\r\n        } else {\r\n          if (target.indexOf(e) === -1) {\r\n            dst.push(e);\r\n          }\r\n        }\r\n      });\r\n    } else { // Replace array. Do not merge by default\r\n      dst = src;\r\n    }\r\n\r\n  } else {\r\n    if (target && typeof target === 'object') {\r\n      Object.keys(target).forEach(function(key) {\r\n        dst[key] = target[key];\r\n      });\r\n    }\r\n    Object.keys(src).forEach(function(key) {\r\n      if (typeof src[key] !== 'object' || !src[key]) {\r\n        dst[key] = src[key];\r\n      } else {\r\n        if (!target[key]) {\r\n          dst[key] = src[key];\r\n        } else {\r\n          dst[key] = deepmerge(target[key], src[key], mergeArray);\r\n        }\r\n      }\r\n    });\r\n  }\r\n  return dst;\r\n}\r\n\r\nexport function fixUrlStr(url: string) {\r\n  // remove double slash\r\n  return url.replace(/([^:]\\/)\\/+/g, '$1');\r\n}\r\n","import { MapOptions, AppOptions } from './interfaces/WebMapApp';\r\nimport { AppSettings, StarterKit } from './interfaces/AppSettings';\r\nimport { WebLayerEntry } from './WebLayerEntry';\r\nimport { Keys } from './components/keys/Keys';\r\nimport { EventEmitter } from 'events';\r\nimport { MapAdapter, MapClickEvent } from './interfaces/MapAdapter';\r\nimport { RuntimeParams } from './interfaces/RuntimeParams';\r\nimport { deepmerge } from './utils/lang';\r\nimport { LayerAdapters, LayerAdapter } from './interfaces/LayerAdapter';\r\nimport { Type } from './utils/Type';\r\n\r\nexport class WebMap<M = any> {\r\n\r\n  options: MapOptions;\r\n\r\n  displayProjection = 'EPSG:3857';\r\n  lonlatProjection = 'EPSG:4326';\r\n\r\n  settings: AppSettings;\r\n\r\n  layers: WebLayerEntry;\r\n\r\n  emitter /** : StrictEventEmitter<EventEmitter, WebMapAppEvents> */ = new EventEmitter();\r\n\r\n  keys: Keys = new Keys(); // TODO: make injectable cashed\r\n\r\n  map: MapAdapter<M>;\r\n\r\n  runtimeParams: RuntimeParams[];\r\n  private _starterKits: StarterKit[];\r\n\r\n  private settingsIsLoading = false;\r\n\r\n  private _baseLayers: string[] = [];\r\n  private _extent: [number, number, number, number];\r\n\r\n  constructor(appOptions: AppOptions) {\r\n    this.map = appOptions.mapAdapter;\r\n    this._starterKits = appOptions.starterKits || [];\r\n\r\n    this._addEventsListeners();\r\n  }\r\n\r\n  async create(options: MapOptions): Promise<this> {\r\n\r\n    this.options = deepmerge(this.options || {}, options);\r\n\r\n    if (!this.settings && this._starterKits.length) {\r\n      await this.getSettings();\r\n    }\r\n\r\n    await this._setupMap();\r\n    return this;\r\n  }\r\n\r\n  async getSettings(): Promise<AppSettings> {\r\n    if (this.settings) {\r\n      return Promise.resolve(this.settings);\r\n    }\r\n    if (this.settingsIsLoading) {\r\n\r\n      return new Promise<AppSettings>((resolve) => {\r\n        const onLoad = (x) => {\r\n          resolve(x);\r\n          this.emitter.removeListener('load-settings', onLoad);\r\n        };\r\n        this.emitter.on('load-settings', onLoad);\r\n      });\r\n\r\n    } else {\r\n      this.settingsIsLoading = true;\r\n      let settings: AppSettings | boolean;\r\n      try {\r\n        settings = {};\r\n\r\n        for (const kit of this._starterKits.filter((x) => x.getSettings)) {\r\n          const setting = await kit.getSettings.call(kit, this);\r\n          if (setting) {\r\n            Object.assign(settings, setting);\r\n          }\r\n        }\r\n      } catch (er) {\r\n        this.settingsIsLoading = false;\r\n        throw new Error(er);\r\n      }\r\n      if (settings) {\r\n        this.settings = settings;\r\n        this.settingsIsLoading = false;\r\n        this.emitter.emit('load-settings', settings);\r\n        return settings;\r\n      }\r\n    }\r\n  }\r\n\r\n  addBaseLayer(\r\n    layerName: string,\r\n    provider: keyof LayerAdapters | Type<LayerAdapter>,\r\n    options?: any): Promise<LayerAdapter> {\r\n\r\n    return this.map.addLayer(provider, { ...options, ...{ id: layerName } }, true).then((layer) => {\r\n      if (layer) {\r\n        this._baseLayers.push(layer.name);\r\n      }\r\n      return layer;\r\n    });\r\n  }\r\n\r\n  isBaseLayer(layerName: string): boolean {\r\n    return this._baseLayers.indexOf(layerName) !== -1;\r\n  }\r\n\r\n  // region MAP\r\n  private async _setupMap() {\r\n    if (this.settings) {\r\n      const { extent_bottom, extent_left, extent_top, extent_right } = this.settings;\r\n      if (extent_bottom && extent_left && extent_top && extent_right) {\r\n        this._extent = [extent_left, extent_bottom, extent_right, extent_top];\r\n        const extent = this._extent;\r\n        if (extent[3] > 82) {\r\n          extent[3] = 82;\r\n        }\r\n        if (extent[1] < -82) {\r\n          extent[1] = -82;\r\n        }\r\n      }\r\n    }\r\n    this.map.displayProjection = this.displayProjection;\r\n    this.map.lonlatProjection = this.lonlatProjection;\r\n\r\n    this.map.create(this.options);\r\n\r\n    this._addTreeLayers();\r\n    await this._addLayerProviders();\r\n\r\n    this._zoomToInitialExtent();\r\n    this.emitter.emit('build-map', this.map);\r\n    return this;\r\n  }\r\n\r\n  private async _addTreeLayers() {\r\n    const settings = await this.getSettings();\r\n    if (settings) {\r\n      const rootLayer = settings.root_item;\r\n      if (rootLayer) {\r\n        this.layers = new WebLayerEntry(this.map, rootLayer);\r\n        this.emitter.emit('add-layers', this.layers);\r\n      }\r\n    }\r\n  }\r\n\r\n  private _zoomToInitialExtent() {\r\n    // const { lat, lon, zoom, angle } = this.runtimeParams.getParams();\r\n    // if (zoom && lon && lat) {\r\n    //   this.map.setCenter([\r\n    //     parseFloat(lon),\r\n    //     parseFloat(lat),\r\n    //   ],\r\n    //   );\r\n    //   this.map.setZoom(\r\n    //     parseInt(zoom, 10),\r\n    //   );\r\n\r\n    //   if (angle) {\r\n    //     this.map.setRotation(\r\n    //       parseFloat(angle),\r\n    //     );\r\n    //   }\r\n    // } else {\r\n    //   this.map.fit(this.options.displayConfig.extent);\r\n    // }\r\n    if (this._extent) {\r\n      this.map.fit(this._extent);\r\n    } else {\r\n      const { center, zoom } = this.options;\r\n\r\n      if (center) {\r\n        this.map.setCenter(center);\r\n      }\r\n      if (zoom) {\r\n        this.map.setZoom(zoom);\r\n      }\r\n    }\r\n  }\r\n\r\n  private async _addLayerProviders() {\r\n    try {\r\n\r\n      for await (const kit of this._starterKits.filter((x) => x.getLayerAdapters)) {\r\n        const adapters = await kit.getLayerAdapters.call(kit);\r\n        if (adapters) {\r\n          for await (const adapter of adapters) {\r\n            // this.map.layerAdapters[adapter.name] = adapter;\r\n            const newAdapter = await adapter.createAdapter(this.map);\r\n            if (newAdapter) {\r\n              this.map.layerAdapters[adapter.name] = newAdapter;\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (er) {\r\n      throw new Error(er);\r\n    }\r\n  }\r\n  // endregion\r\n\r\n  // region Events\r\n\r\n  private _addEventsListeners() {\r\n    // propagate map click event\r\n    this.map.emitter.on('click', (ev: MapClickEvent) => this._onMapClick(ev));\r\n  }\r\n\r\n  private _onMapClick(ev: MapClickEvent) {\r\n    this.emitter.emit('click', ev);\r\n    this._starterKits.forEach((x) => {\r\n      if (x.onMapClick) {\r\n        x.onMapClick(ev, this);\r\n      }\r\n    });\r\n  }\r\n\r\n  // endregion\r\n\r\n}\r\n","import { WebMap } from './WebMap';\r\n\r\nexport * from './WebLayerEntry';\r\nexport * from './interfaces/WebMapApp';\r\nexport * from './interfaces/MapAdapter';\r\nexport * from './interfaces/DialogAdapter';\r\nexport * from './interfaces/MapControl';\r\nexport * from './interfaces/LayerAdapter';\r\nexport * from './interfaces/AppSettings';\r\n\r\nexport default WebMap;\r\n"],"sourceRoot":""}