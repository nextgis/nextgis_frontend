{"version":3,"sources":["webpack://NgwConnector/webpack/universalModuleDefinition","webpack://NgwConnector/webpack/bootstrap","webpack://NgwConnector/(webpack)/buildin/global.js","webpack://NgwConnector/C:/Users/rendr/nextgis/nextgisweb_frontend/node_modules/node-libs-browser/node_modules/events/events.js","webpack://NgwConnector/./src/polyfills.js","webpack://NgwConnector/C:/Users/rendr/nextgis/nextgisweb_frontend/node_modules/timers-browserify/main.js","webpack://NgwConnector/C:/Users/rendr/nextgis/nextgisweb_frontend/node_modules/setimmediate/setImmediate.js","webpack://NgwConnector/C:/Users/rendr/nextgis/nextgisweb_frontend/node_modules/process/browser.js","webpack://NgwConnector/./src/utils.ts","webpack://NgwConnector/./src/index.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","eval","e","EventEmitter","_events","_maxListeners","undefined","isFunction","arg","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNumber","isNaN","TypeError","emit","type","er","handler","len","args","listeners","error","length","arguments","Error","err","context","Array","slice","apply","addListener","listener","newListener","push","warned","console","trace","on","once","fired","removeListener","list","position","splice","removeAllListeners","listenerCount","evlistener","emitter","setImmediate","global","constructor","then","resolve","reject","_state","_handled","_value","_deferreds","u","_immediateFn","onFulfilled","onRejected","f","promise","_unhandledRejectionFn","setTimeout","all","race","warn","self","Promise","scope","Timeout","id","clearFn","_id","_clearFn","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","process","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","document","attachTo","getPrototypeOf","toString","handle","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","Math","random","onGlobalMessage","event","source","data","indexOf","addEventListener","attachEvent","installPostMessageImplementation","MessageChannel","channel","port1","port2","installMessageChannelImplementation","createElement","html","documentElement","script","onreadystatechange","removeChild","appendChild","installReadyStateChangeImplementation","callback","task","run","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","marker","runClearTimeout","Item","array","noop","title","browser","env","argv","version","versions","off","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","templateRe","template","str","replace","OPTIONS","route","src_NgwConnector","NgwConnector","options","events","_loadingQueue","_loadingStatus","__assign","connect","auth","_a","login","password","getUserInfo","_b","sent","makeQuery","_this","headers","getAuthorizationHeaders","withCredentials","user","catch","Authorization","makeClientId","btoa","unescape","encodeURIComponent","request","params","apiItems","a","apiItem","url","shift","replaceParams","fry","post","method","nocache","baseUrl","_getJson","_executeLoadingQueue","_setLoadingQueue","waiting","timestamp","Date","isError","wait","xhr","XMLHttpRequest","open","processingResponce","forError","cb","responseText","JSON","parse","message","readyState","status","onerror","upload","onprogress","lengthComputable","percentComplete","loaded","total","onProgress","h","setRequestHeader","file","FormData","append","stringify","send","loadJSON"],"mappings":"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","file":"ngw-connector.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NgwConnector\"] = factory();\n\telse\n\t\troot[\"NgwConnector\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 6);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","// https://github.com/taylorhakes/promise-polyfill\r\n// Copyright (c) 2014 Taylor Hakes\r\n// Copyright (c) 2014 Forbes Lindesay\r\n\r\n// Permission is hereby granted, free of charge, to any person obtaining a copy\r\n// of this software and associated documentation files (the \"Software\"), to deal\r\n// in the Software without restriction, including without limitation the rights\r\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n// copies of the Software, and to permit persons to whom the Software is\r\n// furnished to do so, subject to the following conditions:\r\n\r\n// The above copyright notice and this permission notice shall be included in\r\n// all copies or substantial portions of the Software.\r\n\r\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n// THE SOFTWARE.\r\n!function(e,n){\"object\"==typeof exports&&\"undefined\"!=typeof module?n():\"function\"==typeof define&&define.amd?define(n):n()}(0,function(){\"use strict\";function e(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(){}function t(e){if(!(this instanceof t))throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof e)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],u(e,this)}function o(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value)}catch(f){return void i(n.promise,f)}r(n.promise,o)}else(1===e._state?r:i)(n.promise,e._value)})):e._deferreds.push(n)}function r(e,n){try{if(n===e)throw new TypeError(\"A promise cannot be resolved with itself.\");if(n&&(\"object\"==typeof n||\"function\"==typeof n)){var o=n.then;if(n instanceof t)return e._state=3,e._value=n,void f(e);if(\"function\"==typeof o)return void u(function(e,n){return function(){e.apply(n,arguments)}}(o,n),e)}e._state=1,e._value=n,f(e)}catch(r){i(e,r)}}function i(e,n){e._state=2,e._value=n,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value)});for(var n=0,r=e._deferreds.length;r>n;n++)o(e,e._deferreds[n]);e._deferreds=null}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,r(n,e))},function(e){t||(t=!0,i(n,e))})}catch(o){if(t)return;t=!0,i(n,o)}}var c=setTimeout;t.prototype[\"catch\"]=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new function(e,n,t){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof n?n:null,this.promise=t}(e,t,r)),r},t.prototype[\"finally\"]=e,t.all=function(e){return new t(function(n,t){function o(e,f){try{if(f&&(\"object\"==typeof f||\"function\"==typeof f)){var u=f.then;if(\"function\"==typeof u)return void u.call(f,function(n){o(e,n)},t)}r[e]=f,0==--i&&n(r)}catch(c){t(c)}}if(!e||\"undefined\"==typeof e.length)throw new TypeError(\"Promise.all accepts an array\");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;r.length>f;f++)o(f,r[f])})},t.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===t?e:new t(function(n){n(e)})},t.reject=function(e){return new t(function(n,t){t(e)})},t.race=function(e){return new t(function(n,t){for(var o=0,r=e.length;r>o;o++)e[o].then(n,t)})},t._immediateFn=\"function\"==typeof setImmediate&&function(e){setImmediate(e)}||function(e){c(e,0)},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",e)};var l=function(){if(\"undefined\"!=typeof self)return self;if(\"undefined\"!=typeof window)return window;if(\"undefined\"!=typeof global)return global;throw Error(\"unable to locate global object\")}();\"Promise\"in l?l.Promise.prototype[\"finally\"]||(l.Promise.prototype[\"finally\"]=e):l.Promise=t});\r\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 6â€“8\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","// readyState\n// Holds the status of the XMLHttpRequest.\n// 0: request not initialized\n// 1: server connection established\n// 2: request received\n// 3: processing request\n// 4: request finished and response is ready\n\n// status\n// 200: \"OK\"\n// 201 \"Created\"\tThe request has been fulfilled, and a new resource is created\n// 403: \"Forbidden\"\n// 404: \"Page not found\"\n// 500: \"Internal Server Error\"\n// For a complete list go to the Http Messages Reference\n\nimport { RequestOptions } from './interfaces';\n\nexport function loadJSON(url, callback, options: RequestOptions = {}, error) {\n  options.method = options.method || 'GET';\n  let xhr: XMLHttpRequest;\n\n  xhr = new XMLHttpRequest();\n  xhr.open(options.method || 'GET', url, true); // true for asynchronous\n\n  const processingResponce = (forError: boolean = false) => {\n    const cb = forError ? error : callback;\n    if (xhr.responseText) {\n      try {\n        cb(JSON.parse(xhr.responseText));\n      } catch (er) {\n        error({ message: '' });\n      }\n    } else {\n      error({ message: '' });\n    }\n  };\n\n  xhr.onreadystatechange = () => {\n    if ((xhr.readyState === 4 && xhr.status === 200) || (xhr.readyState === 3 && xhr.status === 201)) {\n      processingResponce();\n    } else if (xhr.readyState === 3 && xhr.status === 400) {\n      processingResponce();\n    } else if (xhr.readyState === 4 && xhr.status === 500) {\n      processingResponce();\n    }\n  };\n\n  xhr.onerror = (er) => {\n    error(er);\n  };\n\n  xhr.upload.onprogress = function (e) {\n    if (e.lengthComputable) {\n      const percentComplete = (e.loaded / e.total) * 100;\n      if (options.onProgress) {\n        options.onProgress(percentComplete);\n      }\n      // console.log(percentComplete + '% uploaded');\n    }\n  };\n\n  const headers = options.headers;\n  if (headers) {\n    for (const h in headers) {\n      if (headers.hasOwnProperty(h)) {\n        xhr.setRequestHeader(h, headers[h]);\n      }\n    }\n  }\n  xhr.withCredentials = options.withCredentials;\n\n  let data;\n  if (options.file) {\n    data = new FormData();\n    data.append('file', options.file);\n    if (options.data) {\n      for (const d in data) {\n        if (data.hasOwnProperty(d)) {\n          data.append(d, data[d]);\n        }\n      }\n    }\n  } else {\n    data = options.data ? JSON.stringify(options.data) : null;\n  }\n\n  xhr.send(data);\n}\n\n// https://github.com/Leaflet/Leaflet/blob/b507e21c510b53cd704fb8d3f89bb46ea925c8eb/src/core/Util.js#L165\nconst templateRe = /\\{ *([\\w_-]+) *\\}/g;\n\nexport function template(str, data) {\n  return str.replace(templateRe, (s, key) => {\n    let value = data[key];\n\n    if (value === undefined) {\n      throw new Error('No value provided for letiable ' + s);\n\n    } else if (typeof value === 'function') {\n      value = value(data);\n    }\n    return value;\n  });\n}\n","\nimport './polyfills';\n\nimport { RequestItemsParamsMap } from './types/RequestItemsParamsMap';\nimport {\n  NgwConnectorOptions, Router,\n  RequestItemsResponseMap, RequestOptions,\n  Params, LoadingQueue, UserInfo,\n} from './interfaces';\nimport { loadJSON, template } from './utils';\nimport { EventEmitter } from 'events';\n\nexport * from './interfaces';\n\nconst OPTIONS: NgwConnectorOptions = {\n  route: '/api/component/pyramid/route',\n  // baseUrl: 'http://'\n};\n\nexport default class NgwConnector {\n\n  options: NgwConnectorOptions = {};\n\n  user: UserInfo;\n  emitter = new EventEmitter();\n  private route;\n  private _loadingQueue: { [name: string]: LoadingQueue } = {};\n  private _loadingStatus = {};\n\n  constructor(options: NgwConnectorOptions) {\n    this.options = { ...OPTIONS, ...(options || {}) };\n  }\n\n  async connect(): Promise<Router> {\n    if (this.route) {\n      return Promise.resolve(this.route);\n    } else {\n      if (this.options.auth) {\n        const { login, password } = this.options.auth;\n        if (login && password) {\n          await this.getUserInfo();\n        }\n      }\n      return await this.makeQuery(this.options.route, {}, {}).then((route) => {\n        this.route = route;\n        return route;\n      });\n    }\n  }\n\n  getUserInfo(): Promise<any> {\n    // Do not use request('auth.current_user') to vaoid circular-references\n    return this.makeQuery('/api/component/auth/current_user', {}, {\n      headers: this.getAuthorizationHeaders(),\n      withCredentials: true\n    }).then((data: UserInfo) => {\n      this.user = data;\n      this.emitter.emit('login', data);\n      return data;\n    }).catch((er) => {\n      this.emitter.emit('login:error', er);\n      throw er;\n    });\n  }\n\n  getAuthorizationHeaders() {\n    const client = this.makeClientId();\n    return {\n      'Authorization': 'Basic ' + client\n    };\n  }\n\n  makeClientId() {\n    const { login, password } = this.options.auth;\n    return window.btoa(unescape(encodeURIComponent(`${login}:${password}`)));\n  }\n\n  request<K extends keyof RequestItemsParamsMap>(\n    name: K,\n    params?: RequestItemsParamsMap[K] | {},\n    options?: RequestOptions): Promise<RequestItemsResponseMap[K]> {\n\n    return this.connect().then((apiItems) => {\n      for (const a in apiItems) {\n        if (apiItems.hasOwnProperty(a)) {\n          if (a === name) {\n            const apiItem = apiItems[a].slice();\n            let url = apiItem.shift();\n            if (apiItem.length) {\n              params = params || {};\n              const replaceParams = {};\n              for (let fry = 0; fry < apiItem.length; fry++) {\n                const arg = apiItem[fry];\n                replaceParams[fry] = '{' + arg + '}';\n                if (params[arg] === undefined) {\n                  throw new Error('`' + arg + '`' + ' url api argument is not specified');\n                }\n              }\n              url = template(url, replaceParams);\n            }\n            return this.makeQuery(url, params, options);\n          }\n        }\n      }\n    });\n  }\n\n  post<K extends keyof RequestItemsParamsMap>(\n    name: K,\n    options?: RequestOptions,\n    params?: RequestItemsParamsMap[K] | {}): Promise<RequestItemsResponseMap[K]> {\n\n    options = options || {};\n    options.method = 'POST';\n    options.nocache = true;\n    return this.request(name, params, options);\n  }\n\n  makeQuery(\n    url: string,\n    params: Params,\n    options: RequestOptions = {}): Promise<any> {\n\n    url = (this.options.baseUrl ? this.options.baseUrl : '') + url;\n    if (url) {\n      if (params) {\n        url = template(url, params);\n      }\n      // remove double slash\n      url = url.replace(/([^:]\\/)\\/+/g, '$1');\n      if (!this._loadingStatus[url] || options.nocache) {\n        this._loadingStatus[url] = true;\n\n        return this._getJson(url, options).then((data) => {\n          this._loadingStatus[url] = false;\n          this._executeLoadingQueue(url, data);\n          return data;\n        }).catch((er) => {\n          this._loadingStatus[url] = false;\n          this._executeLoadingQueue(url, er, true);\n          this.emitter.emit('error', er);\n          throw er;\n        });\n      } else {\n        this._loadingStatus[url] = false;\n        const promise = new Promise((resolve, reject) => {\n          this._setLoadingQueue(url, resolve, reject);\n        });\n        return promise;\n      }\n    } else {\n      throw new Error('No `url` parameter set for option ' + name);\n    }\n\n  }\n\n  _setLoadingQueue(name, resolve, reject) {\n    this._loadingQueue[name] = this._loadingQueue[name] || {\n      name,\n      waiting: [],\n    };\n    this._loadingQueue[name].waiting.push({\n      resolve,\n      reject,\n      timestamp: new Date(),\n    });\n  }\n\n  _executeLoadingQueue(name, data, isError?) {\n    const queue = this._loadingQueue[name];\n    if (queue) {\n      for (let fry = 0; fry < queue.waiting.length; fry++) {\n        const wait = queue.waiting[fry];\n        if (isError) {\n          if (wait.reject) {\n            wait.reject();\n          }\n        } else {\n          wait.resolve(data);\n        }\n      }\n      queue.waiting = [];\n    }\n  }\n\n  _getJson(url: string, options: RequestOptions): Promise<any> {\n    return new Promise((resolve, reject) => {\n      if (this.user) {\n        options = options || {};\n        // options.withCredentials = true;\n        options.headers = this.getAuthorizationHeaders();\n      }\n      loadJSON(url, resolve, options, reject);\n    });\n  }\n}\n"],"sourceRoot":""}