{"version":3,"sources":["webpack://NgwUploader/webpack/universalModuleDefinition","webpack://NgwUploader/webpack/bootstrap","webpack://NgwUploader/(webpack)/buildin/global.js","webpack://NgwUploader/C:/Users/rendr/nextgis/nextgis_frontend_apps/node_modules/@nextgis/ngw-connector/lib/ngw-connector.js","webpack://NgwUploader/C:/Users/rendr/nextgis/nextgis_frontend_apps/node_modules/events/events.js","webpack://NgwUploader/./src/ngw-uploader.ts","webpack://NgwUploader/C:/Users/rendr/nextgis/nextgis_frontend_apps/node_modules/timers-browserify/main.js","webpack://NgwUploader/C:/Users/rendr/nextgis/nextgis_frontend_apps/node_modules/setimmediate/setImmediate.js","webpack://NgwUploader/C:/Users/rendr/nextgis/nextgis_frontend_apps/node_modules/process/browser.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","g","this","Function","eval","e","global","setImmediate","__generator","thisArg","body","f","y","_","label","sent","trys","ops","next","verb","throw","return","iterator","v","op","TypeError","done","pop","length","push","step","commonjsGlobal","self","fn","createCommonjsModule","assign","configurable","writable","arguments","a","keys","b","getOwnPropertyDescriptor","constructor","then","resolve","reject","_state","_handled","_value","undefined","_deferreds","u","_immediateFn","onFulfilled","onRejected","promise","apply","_unhandledRejectionFn","setTimeout","all","Array","slice","race","console","warn","Error","Promise","OPTIONS","route","NgwConnector","options","_loadingQueue","_loadingStatus","connect","_arguments","P","generator","fulfilled","rejected","result","__awaiter","_a","login","password","_this","_b","auth","log","getUserInfo","makeQuery","client","makeClientId","headers","Authorization","Access-Control-Allow-Origin","Access-Control-Allow-Headers","data","keyname","clientId","localStorage","setItem","JSON","stringify","btoa","unescape","encodeURIComponent","request","params","apiItems","apiItem","url","shift","replaceParams","fry","arg","template","post","method","baseUrl","replace","_setLoadingQueue","_getJson","_executeLoadingQueue","catch","er","waiting","timestamp","Date","isError","queue","wait","callback","error","xhr","XMLHttpRequest","open","X","XDomainRequest","createCORSRequest","onreadystatechange","readyState","status","responseText","parse","upload","onprogress","lengthComputable","percentComplete","loaded","total","onProgress","h","setRequestHeader","withCredentials","file","FormData","append","send","loadJSON","templateRe","str","EventEmitter","_events","_maxListeners","isFunction","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNumber","isNaN","emit","type","handler","len","args","listeners","err","context","addListener","listener","newListener","warned","trace","on","once","fired","removeListener","list","position","splice","removeAllListeners","listenerCount","evlistener","emitter","NgwUploader","inputOptions","html","events__WEBPACK_IMPORTED_MODULE_1__","__assign","connector","_nextgis_ngw_connector__WEBPACK_IMPORTED_MODULE_0__","createInput","input","document","createElement","setAttribute","innerHTML","addEventListener","uploadRaster","files","_fileUpload","resp","upload_meta","meta","name_1","_createResource","newRes","_createStyle","message","eventBegin","state","resource","cls","display_name","parent","id","parentId","raster_layer","source","mime_type","size","srs","Accept","eventEnd","eventError","styleData","description","eventProgress","scope","Timeout","clearFn","_id","_clearFn","clearTimeout","setInterval","clearInterval","timeout","close","unref","ref","enroll","item","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","process","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","doc","attachTo","getPrototypeOf","toString","handle","nextTick","runIfPresent","postMessage","importScripts","postMessageIsAsynchronous","oldOnMessage","onmessage","canUsePostMessage","messagePrefix","Math","random","onGlobalMessage","event","indexOf","attachEvent","installPostMessageImplementation","MessageChannel","channel","port1","port2","installMessageChannelImplementation","documentElement","script","removeChild","appendChild","installReadyStateChangeImplementation","task","run","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","marker","runClearTimeout","Item","array","noop","title","browser","env","argv","version","versions","off","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask"],"mappings":"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","file":"ngw-uploader.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"NgwUploader\"] = factory();\n\telse\n\t\troot[\"NgwUploader\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (factory((global.NgwConnector = {})));\n}(this, (function (exports) { 'use strict';\n\n    /*! *****************************************************************************\r\n    Copyright (c) Microsoft Corporation. All rights reserved.\r\n    Licensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\n    this file except in compliance with the License. You may obtain a copy of the\r\n    License at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\n    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\n    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\n    MERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\n    See the Apache Version 2.0 License for specific language governing permissions\r\n    and limitations under the License.\r\n    ***************************************************************************** */\r\n\r\n    function __awaiter(thisArg, _arguments, P, generator) {\r\n        return new (P || (P = Promise))(function (resolve, reject) {\r\n            function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n            function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n            function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n        });\r\n    }\r\n\r\n    function __generator(thisArg, body) {\r\n        var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n        function verb(n) { return function (v) { return step([n, v]); }; }\r\n        function step(op) {\r\n            if (f) throw new TypeError(\"Generator is already executing.\");\r\n            while (_) try {\r\n                if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n                if (y = 0, t) op = [op[0] & 2, t.value];\r\n                switch (op[0]) {\r\n                    case 0: case 1: t = op; break;\r\n                    case 4: _.label++; return { value: op[1], done: false };\r\n                    case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                    case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                    default:\r\n                        if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                        if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                        if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                        if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                        if (t[2]) _.ops.pop();\r\n                        _.trys.pop(); continue;\r\n                }\r\n                op = body.call(thisArg, _);\r\n            } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n            if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n        }\r\n    }\n\n    var commonjsGlobal = typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\n\n    function createCommonjsModule(fn, module) {\n    \treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n    }\n\n    var polyfills = createCommonjsModule(function (module, exports) {\n    Object.assign || Object.defineProperty(Object, 'assign', { enumerable: !1, configurable: !0, writable: !0, value: function (e, r) { if (null == e) throw new TypeError('Cannot convert first argument to object'); for (let t = Object(e), n = 1; n < arguments.length; n++) { let o = arguments[n]; if (null != o) for (let a = Object.keys(Object(o)), c = 0, b = a.length; c < b; c++) { let i = a[c], l = Object.getOwnPropertyDescriptor(o, i); void 0 !== l && l.enumerable && (t[i] = o[i]); } } return t } });\r\n\r\n    // https://github.com/taylorhakes/promise-polyfill\r\n    // Copyright (c) 2014 Taylor Hakes\r\n    // Copyright (c) 2014 Forbes Lindesay\r\n\r\n    // Permission is hereby granted, free of charge, to any person obtaining a copy\r\n    // of this software and associated documentation files (the \"Software\"), to deal\r\n    // in the Software without restriction, including without limitation the rights\r\n    // to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n    // copies of the Software, and to permit persons to whom the Software is\r\n    // furnished to do so, subject to the following conditions:\r\n\r\n    // The above copyright notice and this permission notice shall be included in\r\n    // all copies or substantial portions of the Software.\r\n\r\n    // THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n    // IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n    // FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n    // AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n    // LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n    // OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n    // THE SOFTWARE.\r\n    !function(e,n){n();}(0,function(){function e(e){var n=this.constructor;return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){return n.reject(t)})})}function n(){}function t(e){if(!(this instanceof t))throw new TypeError(\"Promises must be constructed via new\");if(\"function\"!=typeof e)throw new TypeError(\"not a function\");this._state=0,this._handled=!1,this._value=undefined,this._deferreds=[],u(e,this);}function o(e,n){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,t._immediateFn(function(){var t=1===e._state?n.onFulfilled:n.onRejected;if(null!==t){var o;try{o=t(e._value);}catch(f){return void i(n.promise,f)}r(n.promise,o);}else(1===e._state?r:i)(n.promise,e._value);})):e._deferreds.push(n);}function r(e,n){try{if(n===e)throw new TypeError(\"A promise cannot be resolved with itself.\");if(n&&(\"object\"==typeof n||\"function\"==typeof n)){var o=n.then;if(n instanceof t)return e._state=3,e._value=n,void f(e);if(\"function\"==typeof o)return void u(function(e,n){return function(){e.apply(n,arguments);}}(o,n),e)}e._state=1,e._value=n,f(e);}catch(r){i(e,r);}}function i(e,n){e._state=2,e._value=n,f(e);}function f(e){2===e._state&&0===e._deferreds.length&&t._immediateFn(function(){e._handled||t._unhandledRejectionFn(e._value);});for(var n=0,r=e._deferreds.length;r>n;n++)o(e,e._deferreds[n]);e._deferreds=null;}function u(e,n){var t=!1;try{e(function(e){t||(t=!0,r(n,e));},function(e){t||(t=!0,i(n,e));});}catch(o){if(t)return;t=!0,i(n,o);}}var c=setTimeout;t.prototype[\"catch\"]=function(e){return this.then(null,e)},t.prototype.then=function(e,t){var r=new this.constructor(n);return o(this,new function(e,n,t){this.onFulfilled=\"function\"==typeof e?e:null,this.onRejected=\"function\"==typeof n?n:null,this.promise=t;}(e,t,r)),r},t.prototype[\"finally\"]=e,t.all=function(e){return new t(function(n,t){function o(e,f){try{if(f&&(\"object\"==typeof f||\"function\"==typeof f)){var u=f.then;if(\"function\"==typeof u)return void u.call(f,function(n){o(e,n);},t)}r[e]=f,0==--i&&n(r);}catch(c){t(c);}}if(!e||\"undefined\"==typeof e.length)throw new TypeError(\"Promise.all accepts an array\");var r=Array.prototype.slice.call(e);if(0===r.length)return n([]);for(var i=r.length,f=0;r.length>f;f++)o(f,r[f]);})},t.resolve=function(e){return e&&\"object\"==typeof e&&e.constructor===t?e:new t(function(n){n(e);})},t.reject=function(e){return new t(function(n,t){t(e);})},t.race=function(e){return new t(function(n,t){for(var o=0,r=e.length;r>o;o++)e[o].then(n,t);})},t._immediateFn=\"function\"==typeof setImmediate&&function(e){setImmediate(e);}||function(e){c(e,0);},t._unhandledRejectionFn=function(e){void 0!==console&&console&&console.warn(\"Possible Unhandled Promise Rejection:\",e);};var l=function(){if(\"undefined\"!=typeof self)return self;if(\"undefined\"!=typeof window)return window;if(\"undefined\"!=typeof commonjsGlobal)return commonjsGlobal;throw Error(\"unable to locate global object\")}();\"Promise\"in l?l.Promise.prototype[\"finally\"]||(l.Promise.prototype[\"finally\"]=e):l.Promise=t;});\n    });\n\n    var OPTIONS = {\r\n        route: '/api/component/pyramid/route',\r\n    };\r\n    var NgwConnector = (function () {\r\n        function NgwConnector(options) {\r\n            this.options = {};\r\n            this._loadingQueue = {};\r\n            this._loadingStatus = {};\r\n            this.options = Object.assign({}, OPTIONS, options || {});\r\n        }\r\n        NgwConnector.prototype.connect = function () {\r\n            return __awaiter(this, void 0, void 0, function () {\r\n                var _a, login, password;\r\n                var _this = this;\r\n                return __generator(this, function (_b) {\r\n                    switch (_b.label) {\r\n                        case 0:\r\n                            if (!this.route) return [3, 1];\r\n                            return [2, Promise.resolve(this.route)];\r\n                        case 1:\r\n                            if (!this.options.auth) return [3, 3];\r\n                            console.log(1234);\r\n                            _a = this.options.auth, login = _a.login, password = _a.password;\r\n                            if (!(login && password)) return [3, 3];\r\n                            return [4, this.getUserInfo()];\r\n                        case 2:\r\n                            _b.sent();\r\n                            _b.label = 3;\r\n                        case 3: return [4, this.makeQuery(this.options.route, {}, {}).then(function (route) {\r\n                                _this.route = route;\r\n                                return route;\r\n                            })];\r\n                        case 4: return [2, _b.sent()];\r\n                    }\r\n                });\r\n            });\r\n        };\r\n        NgwConnector.prototype.getUserInfo = function () {\r\n            var _this = this;\r\n            var client = this.makeClientId();\r\n            return this.makeQuery('/api/component/auth/current_user', {}, {\r\n                headers: {\r\n                    'Authorization': 'Basic ' + client,\r\n                    'Access-Control-Allow-Origin': '*',\r\n                    'Access-Control-Allow-Headers': '*',\r\n                },\r\n                mode: 'cors',\r\n            }).then(function (data) {\r\n                console.log(data);\r\n                if (data.keyname !== 'guest') {\r\n                    data.clientId = _this.makeClientId();\r\n                    if (localStorage) {\r\n                        localStorage.setItem('nguser', JSON.stringify(data));\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        NgwConnector.prototype.makeClientId = function () {\r\n            var _a = this.options.auth, login = _a.login, password = _a.password;\r\n            return window.btoa(unescape(encodeURIComponent(login + \":\" + password)));\r\n        };\r\n        NgwConnector.prototype.request = function (name, params, options) {\r\n            var _this = this;\r\n            return this.connect().then(function (apiItems) {\r\n                for (var a in apiItems) {\r\n                    if (apiItems.hasOwnProperty(a)) {\r\n                        if (a === name) {\r\n                            var apiItem = apiItems[a].slice();\r\n                            var url = apiItem.shift();\r\n                            if (apiItem.length) {\r\n                                params = params || {};\r\n                                var replaceParams = {};\r\n                                for (var fry = 0; fry < apiItem.length; fry++) {\r\n                                    var arg = apiItem[fry];\r\n                                    replaceParams[fry] = '{' + arg + '}';\r\n                                    if (params[arg] === undefined) {\r\n                                        throw new Error('`' + arg + '`' + ' url api argument is not specified');\r\n                                    }\r\n                                }\r\n                                url = template(url, replaceParams);\r\n                            }\r\n                            return _this.makeQuery(url, params, options);\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n        };\r\n        NgwConnector.prototype.post = function (name, options, params) {\r\n            options = options || {};\r\n            options.method = 'POST';\r\n            return this.request(name, params, options);\r\n        };\r\n        NgwConnector.prototype.makeQuery = function (url, params, options) {\r\n            var _this = this;\r\n            url = (this.options.baseUrl ? this.options.baseUrl : '') + url;\r\n            if (url) {\r\n                if (params) {\r\n                    url = template(url, params);\r\n                }\r\n                url = url.replace(/([^:]\\/)\\/+/g, '$1');\r\n                if (!this._loadingStatus[url]) {\r\n                    this._loadingStatus[url] = true;\r\n                    return this._getJson(url, options).then(function (data) {\r\n                        _this._loadingStatus[url] = false;\r\n                        _this._executeLoadingQueue(url, data);\r\n                        return data;\r\n                    }).catch(function (er) {\r\n                        _this._loadingStatus[url] = false;\r\n                        _this._executeLoadingQueue(url, er, true);\r\n                    });\r\n                }\r\n                else {\r\n                    this._loadingStatus[url] = false;\r\n                    var promise = new Promise(function (resolve, reject) {\r\n                        _this._setLoadingQueue(url, resolve, reject);\r\n                    });\r\n                    return promise;\r\n                }\r\n            }\r\n            else {\r\n                throw new Error('No `url` parameter set for option ' + name);\r\n            }\r\n        };\r\n        NgwConnector.prototype._setLoadingQueue = function (name, resolve, reject) {\r\n            this._loadingQueue[name] = this._loadingQueue[name] || {\r\n                name: name,\r\n                waiting: [],\r\n            };\r\n            this._loadingQueue[name].waiting.push({\r\n                resolve: resolve,\r\n                reject: reject,\r\n                timestamp: new Date(),\r\n            });\r\n        };\r\n        NgwConnector.prototype._executeLoadingQueue = function (name, data, isError) {\r\n            var queue = this._loadingQueue[name];\r\n            if (queue) {\r\n                for (var fry = 0; fry < queue.waiting.length; fry++) {\r\n                    var wait = queue.waiting[fry];\r\n                    if (isError) {\r\n                        if (wait.reject) {\r\n                            wait.reject();\r\n                        }\r\n                    }\r\n                    else {\r\n                        wait.resolve(data);\r\n                    }\r\n                }\r\n                queue.waiting = [];\r\n            }\r\n        };\r\n        NgwConnector.prototype._getJson = function (url, options) {\r\n            return new Promise(function (resolve, reject) {\r\n                loadJSON(url, resolve, options, reject);\r\n            });\r\n        };\r\n        return NgwConnector;\r\n    }());\r\n    function loadJSON(url, callback, options, error) {\r\n        if (options === void 0) { options = {}; }\r\n        options.method = options.method || 'GET';\r\n        var xhr;\r\n        if (options.mode === 'cors') {\r\n            xhr = createCORSRequest(options.method, url);\r\n        }\r\n        else {\r\n            xhr = new XMLHttpRequest();\r\n            xhr.open(options.method || 'GET', url, true);\r\n        }\r\n        xhr.onreadystatechange = function () {\r\n            if ((xhr.readyState === 4 && xhr.status === 200) || (xhr.readyState === 3 && xhr.status === 201)) {\r\n                if (xhr.responseText) {\r\n                    try {\r\n                        callback(JSON.parse(xhr.responseText));\r\n                    }\r\n                    catch (er) {\r\n                        error(er);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        xhr.upload.onprogress = function (e) {\r\n            if (e.lengthComputable) {\r\n                var percentComplete = (e.loaded / e.total) * 100;\r\n                if (options.onProgress) {\r\n                    options.onProgress(percentComplete);\r\n                }\r\n            }\r\n        };\r\n        var headers = options.headers;\r\n        if (headers) {\r\n            for (var h in headers) {\r\n                if (headers.hasOwnProperty(h)) {\r\n                    xhr.setRequestHeader(h, headers[h]);\r\n                }\r\n            }\r\n        }\r\n        xhr.withCredentials = options.withCredentials;\r\n        var data;\r\n        if (options.file) {\r\n            data = new FormData();\r\n            data.append('file', options.file);\r\n            if (options.data) {\r\n                for (var d in data) {\r\n                    if (data.hasOwnProperty(d)) {\r\n                        data.append(d, data[d]);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            data = options.data ? JSON.stringify(options.data) : null;\r\n        }\r\n        xhr.send(data);\r\n    }\r\n    function createCORSRequest(method, url) {\r\n        var xhr = new XMLHttpRequest();\r\n        if ('withCredentials' in xhr) {\r\n            xhr.open(method, url, true);\r\n        }\r\n        else {\r\n            var X = XDomainRequest;\r\n            if (typeof X !== 'undefined') {\r\n                xhr = new X();\r\n                xhr.open(method, url);\r\n            }\r\n            else {\r\n                xhr = null;\r\n            }\r\n        }\r\n        return xhr;\r\n    }\r\n    var templateRe = /\\{ *([\\w_-]+) *\\}/g;\r\n    function template(str, data) {\r\n        return str.replace(templateRe, function (s, key) {\r\n            var value = data[key];\r\n            if (value === undefined) {\r\n                throw new Error('No value provided for letiable ' + s);\r\n            }\r\n            else if (typeof value === 'function') {\r\n                value = value(data);\r\n            }\r\n            return value;\r\n        });\r\n    }\n\n    exports.NgwConnector = NgwConnector;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=ngw-connector.js.map\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","// import { NgwConnector } from '../../../nextgisweb_frontend/packages/ngw-connector/src/ngw-connector';\nimport { NgwConnector } from '@nextgis/ngw-connector';\nimport { NgwUploadOptions, UploadInputOptions, RasterUploadOptions } from './interfaces';\nimport { EventEmitter } from 'events';\n\nexport interface RespError {\n  exception: 'ValidationError';\n  message: string;\n  serializer: string;\n}\n\ninterface EmitterStatus {\n  status: 'upload' | 'create-resource' | 'create-style';\n  state: 'begin' | 'end' | 'progress' | 'error';\n  message?: string;\n  data?: any;\n}\n\nexport default class NgwUploader {\n\n  options: NgwUploadOptions = {\n    inputOptions: {\n      html: 'Upload file',\n    },\n  };\n\n  emitter = new EventEmitter();\n  connector: NgwConnector;\n\n  constructor(options: NgwUploadOptions) {\n    this.options = { ...this.options, ...options };\n    this.connector = new NgwConnector(options);\n  }\n\n  createInput(options: UploadInputOptions = {}): HTMLElement {\n    options = { ...this.options.inputOptions, ...options };\n    const input = document.createElement('input');\n    input.setAttribute('type', 'file');\n    input.innerHTML = options.html;\n\n    input.addEventListener('change', () => {\n      this.uploadRaster(input.files[0], options);\n    });\n\n    return input;\n  }\n\n  uploadRaster(file: File, options: RasterUploadOptions): Promise<any> {\n    return this._fileUpload(file, options)\n      .then((resp) => {\n        if (resp && resp.upload_meta) {\n\n          const meta = resp.upload_meta[0];\n          const name = options.name || meta.name;\n\n          return this._createResource(name, meta, options).then((newRes) => {\n            if (newRes) {\n              return this._createStyle(name, newRes);\n            }\n            return Promise.reject('No resource');\n          });\n        }\n      }).catch((er: RespError) => {\n        console.error(er.message);\n      });\n  }\n\n  private _createResource(name: string, meta, options: RasterUploadOptions) {\n\n    const eventBegin: EmitterStatus = {\n      status: 'create-resource',\n      state: 'begin',\n      message: 'resource creation start',\n      data: meta\n    };\n    this.emitter.emit('status:change', eventBegin);\n\n    const data = {\n      resource: {\n        cls: 'raster_layer',\n        display_name: name,\n        parent: { id: options.parentId !== undefined ? options.parentId : 0 },\n      },\n      raster_layer: {\n        source: {\n          id: meta.id,\n          mime_type: meta.mime_type,\n          size: meta.size,\n        },\n        srs: { id: 3857 },\n      },\n    };\n\n    return this.connector.post('resource.collection', { data, headers: { Accept: '*/*' } }).then((resp) => {\n      const eventEnd: EmitterStatus = {\n        status: 'create-resource',\n        state: 'end',\n        message: 'resource creation complate',\n        data: resp\n      };\n      this.emitter.emit('status:change', eventEnd);\n      return resp;\n    }).catch((error) => {\n      const eventError: EmitterStatus = {\n        status: 'create-resource',\n        state: 'error',\n        message: 'resource creation error',\n        data: error\n      };\n      this.emitter.emit('status:change', eventError);\n      throw error;\n    });\n  }\n\n  private _createStyle(name: string, newRes) {\n\n    const eventBegin: EmitterStatus = {\n      status: 'create-style',\n      state: 'begin',\n      message: `style creation for resource ${newRes.id} start`,\n      data: newRes\n    };\n    this.emitter.emit('status:change', eventBegin);\n\n    const styleData = {\n      resource: {\n        cls: 'raster_style',\n        description: null,\n        display_name: name + '_style',\n        keyname: null,\n        parent: {\n          id: newRes.id,\n        },\n      },\n    };\n    return this.connector.post('resource.collection', { data: styleData }).then((resp) => {\n      const eventEnd: EmitterStatus = {\n        status: 'create-style',\n        state: 'end',\n        message: `style creation for resource ${newRes.id} complate`,\n        data: resp\n      };\n      this.emitter.emit('status:change', eventEnd);\n      return resp;\n    }).catch((error) => {\n      const eventError: EmitterStatus = {\n        status: 'create-style',\n        state: 'error',\n        message: 'style creation for resource ${newRes.id} faild',\n        data: error\n      };\n      this.emitter.emit('status:change', eventError);\n      throw error;\n    });\n  }\n\n  private _fileUpload(file: File, options: RasterUploadOptions = {}) {\n    const eventBegin: EmitterStatus = {\n      status: 'upload',\n      state: 'begin',\n      message: 'file upload start',\n      data: {\n        file\n      }\n    };\n    this.emitter.emit('status:change', eventBegin);\n    return this.connector.post('file_upload.upload', {\n      file,\n      onProgress: (percentComplete) => {\n        const message = percentComplete + '% uploaded';\n        if (options.onProgress) {\n          options.onProgress(percentComplete);\n        }\n        const eventProgress: EmitterStatus = {\n          status: 'upload',\n          state: 'progress',\n          message,\n          data: {\n            percentComplete\n          }\n        };\n        this.emitter.emit('status:change', eventProgress);\n      },\n    }).then((resp) => {\n      const eventEnd: EmitterStatus = {\n        status: 'upload',\n        state: 'end',\n        message: 'file upload finish',\n        data: resp\n      };\n      this.emitter.emit('status:change', eventEnd);\n      return resp;\n    }).catch((error) => {\n      const eventError: EmitterStatus = {\n        status: 'upload',\n        state: 'error',\n        message: 'file upload error',\n        data: error\n      };\n      this.emitter.emit('status:change', eventError);\n      throw error;\n    });\n  }\n}\n","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n"],"sourceRoot":""}